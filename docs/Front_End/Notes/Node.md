---
title: Nodeç¬”è®°
description: è¯¦ç»†è®°å½•äº†Nodeçš„ä½¿ç”¨ï¼ˆå«Expressæ¡†æ¶ï¼‰
prev:
  text: 'JavaScript'
  link: '/Front_End/Notes/JavaScript'
next:
  text: 'Webpack'
  link: '/Front_End/Notes/Webpack'
tags:
  - å‰ç«¯
  - Node
  - ç¬”è®°
---



# Nodeç¬”è®°

> https://github.com/PuppetRuler/VS-Code-Front/tree/main/Node

## ä¸€ã€å…¥é—¨

### Node.js æ˜¯ä»€ä¹ˆ

Node.jsæ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œè·¨å¹³å°çš„JavaScriptè¿è¡Œç¯å¢ƒ

é€šä¿—æ¥è®²ï¼šNode.jså°±æ˜¯ä¸€æ¬¾åº”ç”¨ç¨‹åºï¼Œæ˜¯ä¸€æ¬¾è½¯ä»¶ï¼Œå®ƒå¯ä»¥è¿è¡ŒJavaScript


### Node.js çš„ä½œç”¨

1. å¼€å‘æœåŠ¡å™¨åº”ç”¨
2. å¼€å‘å·¥å…·ç±»åº”ç”¨ï¼šæ¯”å¦‚Webpackã€Viteã€Babel
3. å¼€å‘æ¡Œé¢ç«¯åº”ç”¨ï¼šElectron æ¯”å¦‚VSCodeã€Figmaã€Postman

## äºŒã€Bufferï¼ˆç¼“å†²å™¨ï¼‰

### 1. æ¦‚å¿µ

Buffer æ˜¯ä¸€ä¸ªç±»ä¼¼äºæ•°ç»„çš„ `å¯¹è±¡` ï¼Œç”¨äºè¡¨ç¤ºå›ºå®šé•¿åº¦çš„å­—èŠ‚åºåˆ—

Buffer æœ¬è´¨æ˜¯ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œä¸“é—¨ç”¨æ¥å¤„ç† `äºŒè¿›åˆ¶æ•°æ®` ã€‚


### 2. ç‰¹ç‚¹

1. Buffer å¤§å°å›ºå®šä¸”æ— æ³•è°ƒæ•´
2. Buffer æ€§èƒ½è¾ƒå¥½ï¼Œå¯ä»¥ç›´æ¥å¯¹è®¡ç®—æœºå†…å­˜è¿›è¡Œæ“ä½œ
3. æ¯ä¸ªå…ƒç´ çš„å¤§å°ä¸º 1 å­—èŠ‚ï¼ˆbyteï¼‰


### 3. ä½¿ç”¨

#### 3-1. åˆ›å»º Buffer

Node.js ä¸­åˆ›å»º Buffer çš„æ–¹å¼ä¸»è¦å¦‚ä¸‹å‡ ç§ï¼š

1. `Buffer.alloc`

   ```js
   // åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º 10 å­—èŠ‚çš„ Bufferï¼Œç›¸å½“äºç”³è¯·äº† 10 å­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œæ¯ä¸ªå­—èŠ‚çš„å€¼ä¸º 0
   let buf_1 = Buffer.alloc(10); // <Buffer 00 00 00 00 00 00 00 00 00 00>
   ```

2. `Buffer.allocUnsafe`

   ```js
   // åˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º 10 å­—èŠ‚çš„ Bufferï¼Œbuffer ä¸­å¯èƒ½å­˜åœ¨æ—§æ•°æ®ï¼Œå¯èƒ½ä¼šå½±å“æ‰§è¡Œç»“æœï¼Œæ‰€ä»¥å« unsafe ï¼Œä½†æ˜¯æ•ˆç‡æ¯” alloc é«˜
   let buf_2 = Buffer.allocUnsafe(10);
   ```

3. `Buffer.from`

   ```js
   // é€šè¿‡å­—ç¬¦ä¸²åˆ›å»º Buffer
   let buf_3 = Buffer.from('hello');
   // é€šè¿‡æ•°ç»„åˆ›å»º Buffer
   let buf_4 = Buffer.from([105, 108, 111, 118, 101, 121, 111, 117]);
   ```

#### 3-2 Buffer ä¸å­—ç¬¦ä¸²çš„è½¬åŒ–

æˆ‘ä»¬å¯ä»¥å€ŸåŠ© `toString` æ–¹æ³•å°† Buffer è½¬ä¸ºå­—ç¬¦ä¸²

```js
let buf_4 = Buffer.from([105, 108, 111, 118, 101, 121, 111, 117]);
console.log(buf_4.toString()); // iloveyou
```

> `toString` é»˜è®¤æ˜¯æŒ‰ç…§ `utf-8` ç¼–ç æ–¹å¼è¿›è¡Œè½¬æ¢çš„

#### 3-3 Buffer çš„è¯»å†™

Buffer å¯ä»¥ç›´æ¥é€šè¿‡ `[]` çš„æ–¹å¼å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚

```js
let buf_3 = Buffer.from('hello');
// è¯»å–
console.log(buf_3[1]); // 101
// ä¿®æ”¹
buf_3[1] = 97;
// æŸ¥çœ‹å­—ç¬¦ä¸²ç»“æœ
console.log(buf_3.toString()); // hallo
```

> æ³¨æ„:
>
> 1. å¦‚æœä¿®æ”¹çš„æ•°å€¼è¶…è¿‡ `255` ï¼Œåˆ™è¶…è¿‡ 8 ä½æ•°æ®ä¼šè¢«èˆå¼ƒ
> 2. ä¸€ä¸ª `utf-8` çš„å­—ç¬¦ `ä¸€èˆ¬` å 3ä¸ªå­—èŠ‚

## ä¸‰ã€fs æ¨¡å—

fs å…¨ç§°ä¸º `file system` ï¼Œç§°ä¹‹ä¸º `æ–‡ä»¶ç³»ç»Ÿ` ï¼Œæ˜¯ Node.js ä¸­çš„ `å†…ç½®æ¨¡å—` ï¼Œå¯ä»¥å¯¹è®¡ç®—æœºä¸­çš„ç£ç›˜è¿›è¡Œæ“ä½œã€‚

æœ¬ç« èŠ‚ä¼šä»‹ç»å¦‚ä¸‹å‡ ä¸ªæ“ä½œï¼š

1. æ–‡ä»¶å†™å…¥
2. æ–‡ä»¶è¯»å–
3. æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å
4. æ–‡ä»¶åˆ é™¤
5. æ–‡ä»¶å¤¹æ“ä½œ
6. æŸ¥çœ‹èµ„æºçŠ¶æ€

### 1.æ–‡ä»¶å†™å…¥

æ–‡ä»¶å†™å…¥å°±æ˜¯å°† `æ•°æ®` ä¿å­˜åˆ° `æ–‡ä»¶` ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•æ¥å®ç°è¯¥æ•ˆæœ

| æ–¹æ³•                        | è¯´æ˜     |
| --------------------------- | -------- |
| writeFile                   | å¼‚æ­¥å†™å…¥ |
| writeFileSync               | åŒæ­¥å†™å…¥ |
| appendFile / appendFileSync | è¿½åŠ å†™å…¥ |
| createWriteStream           | æµå¼å†™å…¥ |

#### 1-1. writeFile å¼‚æ­¥å†™å…¥

è¯­æ³•ï¼š `fs.writeFile(file, data[, options], callback)`

å‚æ•°è¯´æ˜ï¼š

- file æ–‡ä»¶å
- data å¾…å†™å…¥çš„æ•°æ®
- options é€‰é¡¹è®¾ç½® `ï¼ˆå¯é€‰ï¼‰`
- callback å†™å…¥å›è°ƒ

è¿”å›å€¼ï¼š `undefined`

ä»£ç ç¤ºä¾‹ï¼š

```js
// require æ˜¯ Node.js ç¯å¢ƒä¸­çš„'å…¨å±€'å˜é‡ï¼Œç”¨æ¥å¯¼å…¥æ¨¡å—
const fs = require('fs');
//å°† ã€ä¸‰äººè¡Œï¼Œå¿…æœ‰æˆ‘å¸ˆç„‰ã€‚ã€ å†™å…¥åˆ°å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„ã€åº§å³é“­.txtã€æ–‡ä»¶ä¸­
fs.writeFile('./åº§å³é“­.txt', 'ä¸‰äººè¡Œï¼Œå¿…æœ‰æˆ‘å¸ˆç„‰ã€‚', err => {
    //å¦‚æœå†™å…¥å¤±è´¥ï¼Œåˆ™å›è°ƒå‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šä¼ å…¥é”™è¯¯å¯¹è±¡ï¼Œå¦‚å†™å…¥æˆåŠŸï¼Œä¼šä¼ å…¥ null
    if (err) {
        console.log(err);
        return;
    }
    console.log('å†™å…¥æˆåŠŸ');
});
```

#### 1-2. writeFileSync åŒæ­¥å†™å…¥

è¯­æ³•ï¼š `fs.writeFileSync(file, data[, options])`

å‚æ•°ä¸ fs.writeFile å¤§ä½“ä¸€è‡´ï¼Œåªæ˜¯æ²¡æœ‰ callback å‚æ•°

è¿”å›å€¼ï¼š `undefined`

ä»£ç ç¤ºä¾‹ï¼š

```js
try {
    fs.writeFileSync('./åº§å³é“­.txt', 'ä¸‰äººè¡Œï¼Œå¿…æœ‰æˆ‘å¸ˆç„‰ã€‚');
} catch (e) {
    console.log(e);
}
```

> Node.js ä¸­çš„ç£ç›˜æ“ä½œæ˜¯ç”±å…¶ä»– `çº¿ç¨‹` å®Œæˆçš„ï¼Œç»“æœçš„å¤„ç†æœ‰ä¸¤ç§æ¨¡å¼ï¼š
>
> - åŒæ­¥å¤„ç† JavaScript ä¸»çº¿ç¨‹ `ä¼šç­‰å¾…` å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œç„¶åå†ç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹çš„ä»£ç ï¼Œ`æ•ˆç‡è¾ƒä½`
> - å¼‚æ­¥å¤„ç† JavaScript ä¸»çº¿ç¨‹ `ä¸ä¼šç­‰å¾…` å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œç›´æ¥æ‰§è¡Œåç»­çš„ä¸»çº¿ç¨‹ä»£ç ï¼Œ`æ•ˆç‡è¾ƒå¥½`

#### [1-3. appendFile / appendFileSync è¿½åŠ å†™å…¥](ä»£ç /02_fsæ–‡ä»¶ç³»ç»Ÿ/ä»£ç /2-è¿½åŠ å†™å…¥.js)

appendFile ä½œç”¨æ˜¯åœ¨æ–‡ä»¶å°¾éƒ¨è¿½åŠ å†…å®¹ï¼ŒappendFile è¯­æ³•ä¸ writeFile è¯­æ³•å®Œå…¨ç›¸åŒ

è¯­æ³•:

- `fs.appendFile(file, data[, options], callback)`
- `fs.appendFileSync(file, data[, options])`

è¿”å›å€¼ï¼š äºŒè€…éƒ½ä¸º `undefined`

å®ä¾‹ä»£ç ï¼š

```js
fs.appendFile('./åº§å³é“­.txt', 'æ‹©å…¶å–„è€…è€Œä»ä¹‹ï¼Œå…¶ä¸å–„è€…è€Œæ”¹ä¹‹ã€‚', err => {
    if (err) throw err;
    console.log('è¿½åŠ æˆåŠŸ')
});
fs.appendFileSync('./åº§å³é“­.txt', '\r\næ¸©æ•…è€ŒçŸ¥æ–°, å¯ä»¥ä¸ºå¸ˆçŸ£');
```

#### [1-4. createWriteStream æµå¼å†™å…¥](ä»£ç /02_fsæ–‡ä»¶ç³»ç»Ÿ/ä»£ç /3-æµå¼å†™å…¥.js)

è¯­æ³•ï¼š `fs.createWriteStream(path[, options])`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶è·¯å¾„
- options é€‰é¡¹é…ç½®ï¼ˆ `å¯é€‰` ï¼‰

è¿”å›å€¼ï¼š `Object`

ä»£ç ç¤ºä¾‹ï¼š

```js
let ws = fs.createWriteStream('./è§‚ä¹¦æœ‰æ„Ÿ.txt');
ws.write('åŠäº©æ–¹å¡˜ä¸€é‰´å¼€\r\n');
ws.write('å¤©å…‰äº‘å½±å…±å¾˜å¾Š\r\n');
ws.write('é—®æ¸ é‚£å¾—æ¸…å¦‚è®¸\r\n');
ws.write('ä¸ºæœ‰æºå¤´æ´»æ°´æ¥\r\n');
ws.end();
```

> `ç¨‹åºæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„` ï¼Œæµå¼å†™å…¥å¯ä»¥å‡å°‘æ‰“å¼€å…³é—­æ–‡ä»¶çš„æ¬¡æ•°ã€‚  
> æµå¼å†™å…¥æ–¹å¼é€‚ç”¨äº `å¤§æ–‡ä»¶å†™å…¥æˆ–è€…é¢‘ç¹å†™å…¥` çš„åœºæ™¯, `writeFile` é€‚åˆäº `å†™å…¥é¢‘ç‡è¾ƒä½çš„åœºæ™¯`  

#### 1-5 å†™å…¥æ–‡ä»¶çš„åœºæ™¯

`æ–‡ä»¶å†™å…¥` åœ¨è®¡ç®—æœºä¸­æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ“ä½œï¼Œä¸‹é¢çš„åœºæ™¯éƒ½ç”¨åˆ°äº†æ–‡ä»¶å†™å…¥

- ä¸‹è½½æ–‡ä»¶
- å®‰è£…è½¯ä»¶
- ä¿å­˜ç¨‹åºæ—¥å¿—ï¼Œå¦‚ Git
- ç¼–è¾‘å™¨ä¿å­˜æ–‡ä»¶
- è§†é¢‘å½•åˆ¶

> å½“ `éœ€è¦æŒä¹…åŒ–ä¿å­˜æ•°æ®` çš„æ—¶å€™ï¼Œåº”è¯¥æƒ³åˆ° `æ–‡ä»¶å†™å…¥`  

### 2.æ–‡ä»¶è¯»å–

æ–‡ä»¶è¯»å–é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é€šè¿‡ç¨‹åºä»æ–‡ä»¶ä¸­å–å‡ºå…¶ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‡ ç§æ–¹å¼ï¼š

| æ–¹æ³•             | è¯´æ˜     |
| ---------------- | -------- |
| readFile         | å¼‚æ­¥è¯»å– |
| readFileSync     | åŒæ­¥è¯»å– |
| createReadStream | æµå¼è¯»å– |

#### 2-1 readFile å¼‚æ­¥è¯»å–

è¯­æ³•ï¼š `fs.readFile(path[, options], callback)`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶è·¯å¾„
- options é€‰é¡¹é…ç½®
- callback å›è°ƒå‡½æ•°

è¿”å›å€¼ï¼š `undefined`

ä»£ç ç¤ºä¾‹ï¼š

```js
//å¯¼å…¥ fs æ¨¡å—
const fs = require('fs');
fs.readFile('./åº§å³é“­.txt', (err, data) => {
    if (err) throw err;
    console.log(data);
});
fs.readFile('./åº§å³é“­.txt', 'utf-8', (err, data) => {
    if (err) throw err;
    console.log(data);
});
```

#### 2-2 readFileSync åŒæ­¥è¯»å–

è¯­æ³•ï¼š `fs.readFileSync(path[, options])`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶è·¯å¾„
- options é€‰é¡¹é…ç½®

è¿”å›å€¼ï¼š `string | Buffer`

ä»£ç ç¤ºä¾‹ï¼š

```js
let data = fs.readFileSync('./åº§å³é“­.txt');
let data2 = fs.readFileSync('./åº§å³é“­.txt', 'utf-8');
```

#### 2-3 createReadStream æµå¼è¯»å–

è¯­æ³•ï¼š `fs.createReadStream(path[, options])`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶è·¯å¾„
- options é€‰é¡¹é…ç½®ï¼ˆ `å¯é€‰` ï¼‰

è¿”å›å€¼ï¼š `Object`

ä»£ç ç¤ºä¾‹ï¼š

```js
//åˆ›å»ºè¯»å–æµå¯¹è±¡
let rs = fs.createReadStream('./è§‚ä¹¦æœ‰æ„Ÿ.txt');
//æ¯æ¬¡å–å‡º 64k æ•°æ®åæ‰§è¡Œä¸€æ¬¡ data å›è°ƒ
rs.on('data', data => {
    console.log(data);
    console.log(data.length);
});
//è¯»å–å®Œæ¯•å, æ‰§è¡Œ end å›è°ƒ
rs.on('end', () => {
    console.log('è¯»å–å®Œæˆ')
});
```

#### 2-4 è¯»å–æ–‡ä»¶åº”ç”¨åœºæ™¯

- ç”µè„‘å¼€æœº
- ç¨‹åºè¿è¡Œ
- ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶
- æŸ¥çœ‹å›¾ç‰‡
- æ’­æ”¾è§†é¢‘
- æ’­æ”¾éŸ³ä¹
- Git æŸ¥çœ‹æ—¥å¿—
- ä¸Šä¼ æ–‡ä»¶
- æŸ¥çœ‹èŠå¤©è®°å½•


### 3.æ–‡ä»¶ç§»åŠ¨ä¸é‡å‘½å

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `rename` æˆ– `renameSync` æ¥ç§»åŠ¨æˆ–é‡å‘½å `æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹`

è¯­æ³•ï¼š

- `fs.rename(oldPath, newPath, callback)`
- `fs.renameSync(oldPath, newPath)`

å‚æ•°è¯´æ˜ï¼š

- oldPath æ–‡ä»¶å½“å‰çš„è·¯å¾„
- newPath æ–‡ä»¶æ–°çš„è·¯å¾„
- callback æ“ä½œåçš„å›è°ƒ

ä»£ç ç¤ºä¾‹ï¼š

```js
fs.rename('./è§‚ä¹¦æœ‰æ„Ÿ.txt', './è®ºè¯­/è§‚ä¹¦æœ‰æ„Ÿ.txt', (err) => {
    if (err) throw err;
    console.log('ç§»åŠ¨å®Œæˆ')
});
fs.renameSync('./åº§å³é“­.txt', './è®ºè¯­/æˆ‘çš„åº§å³é“­.txt');
```


### 4.æ–‡ä»¶åˆ é™¤

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `unlink` æˆ– `unlinkSync` æ¥åˆ é™¤æ–‡ä»¶

è¯­æ³•ï¼š

- `fs.unlink(path, callback)`
- `fs.unlinkSync(path)`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶è·¯å¾„
- callback æ“ä½œåçš„å›è°ƒ

ä»£ç ç¤ºä¾‹ï¼š

```js
const fs = require('fs');
fs.unlink('./test.txt', err => {
    if (err) throw err;
    console.log('åˆ é™¤æˆåŠŸ');
});
fs.unlinkSync('./test2.txt');
```


### 5.æ–‡ä»¶å¤¹æ“ä½œ

å€ŸåŠ© Node.js çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ–‡ä»¶å¤¹è¿›è¡Œ `åˆ›å»º` ã€ `è¯»å–` ã€ `åˆ é™¤` ç­‰æ“ä½œ

| æ–¹æ³•                  | è¯´æ˜       |
| --------------------- | ---------- |
| mkdir / mkdirSync     | åˆ›å»ºæ–‡ä»¶å¤¹ |
| readdir / readdirSync | è¯»å–æ–‡ä»¶å¤¹ |
| rmdir / rmdirSync     | åˆ é™¤æ–‡ä»¶å¤¹ |

#### 5-1 mkdir åˆ›å»ºæ–‡ä»¶å¤¹

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `mkdir` æˆ– `mkdirSync` æ¥åˆ›å»ºæ–‡ä»¶å¤¹

è¯­æ³•ï¼š

- `fs.mkdir(path[, options], callback)`
- `fs.mkdirSync(path[, options])`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶å¤¹è·¯å¾„
- options é€‰é¡¹é…ç½®ï¼ˆ `å¯é€‰` ï¼‰
- callback æ“ä½œåçš„å›è°ƒ

ç¤ºä¾‹ä»£ç ï¼š

```js
//å¼‚æ­¥åˆ›å»ºæ–‡ä»¶å¤¹
fs.mkdir('./page', err => {
    if (err) throw err;
    console.log('åˆ›å»ºæˆåŠŸ');
});
//é€’å½’å¼‚æ­¥åˆ›å»º
fs.mkdir('./1/2/3', { recursive: true }, err => {
    if (err) throw err;
    console.log('é€’å½’åˆ›å»ºæˆåŠŸ');
});
//é€’å½’åŒæ­¥åˆ›å»ºæ–‡ä»¶å¤¹
fs.mkdirSync('./x/y/z', { recursive: true });
```

#### 5-2 readdir è¯»å–æ–‡ä»¶å¤¹

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `readdir` æˆ– `readdirSync` æ¥è¯»å–æ–‡ä»¶å¤¹

è¯­æ³•ï¼š

- `fs.readdir(path[, options], callback)`
- `fs.readdirSync(path[, options])`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶å¤¹è·¯å¾„
- options é€‰é¡¹é…ç½®ï¼ˆ `å¯é€‰` ï¼‰
- callback æ“ä½œåçš„å›è°ƒ

ç¤ºä¾‹ä»£ç ï¼š

```js
//å¼‚æ­¥è¯»å–
fs.readdir('./è®ºè¯­', (err, data) => {
    if (err) throw err;
    console.log(data);
});
//åŒæ­¥è¯»å–
let data = fs.readdirSync('./è®ºè¯­');
console.log(data);
```

#### 5-3 rmdir åˆ é™¤æ–‡ä»¶å¤¹

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `rmdir` æˆ– `rmdirSync` æ¥åˆ é™¤æ–‡ä»¶å¤¹

è¯­æ³•ï¼š

- `fs.rmdir(path[, options], callback)`
- `fs.rmdirSync(path[, options])`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶å¤¹è·¯å¾„
- options é€‰é¡¹é…ç½®ï¼ˆ `å¯é€‰` ï¼‰
- callback æ“ä½œåçš„å›è°ƒ

ç¤ºä¾‹ä»£ç ï¼š

```js
//å¼‚æ­¥åˆ é™¤æ–‡ä»¶å¤¹
fs.rmdir('./page', err => {
    if (err) throw err;
    console.log('åˆ é™¤æˆåŠŸ');
});
//å¼‚æ­¥é€’å½’åˆ é™¤æ–‡ä»¶å¤¹
fs.rmdir('./1', { recursive: true }, err => {
    if (err) {
        console.log(err);
    }
    console.log('é€’å½’åˆ é™¤')
});
//åŒæ­¥é€’å½’åˆ é™¤æ–‡ä»¶å¤¹
fs.rmdirSync('./x', { recursive: true })
```


### 6.æŸ¥çœ‹èµ„æºçŠ¶æ€

åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `stat` æˆ– `statSync` æ¥æŸ¥çœ‹èµ„æºçš„è¯¦ç»†ä¿¡æ¯

è¯­æ³•ï¼š

- `fs.stat(path[, options], callback)`
- `fs.statSync(path[, options])`

å‚æ•°è¯´æ˜ï¼š

- path æ–‡ä»¶å¤¹è·¯å¾„
- options é€‰é¡¹é…ç½®ï¼ˆ `å¯é€‰` ï¼‰
- callback æ“ä½œåçš„å›è°ƒ

ç¤ºä¾‹ä»£ç ï¼š

```js
//å¼‚æ­¥è·å–çŠ¶æ€
fs.stat('./data.txt', (err, data) => {
    if (err) throw err;
    console.log(data);
});
//åŒæ­¥è·å–çŠ¶æ€
let data = fs.statSync('./data.txt');
```

ç»“æœå€¼å¯¹è±¡ç»“æ„ï¼š

- size æ–‡ä»¶ä½“ç§¯
- birthtime åˆ›å»ºæ—¶é—´
- mtime æœ€åä¿®æ”¹æ—¶é—´
- isFile æ£€æµ‹æ˜¯å¦ä¸ºæ–‡ä»¶
- isDirectory æ£€æµ‹æ˜¯å¦ä¸ºæ–‡ä»¶å¤¹
- ...


### 7.ç›¸å¯¹è·¯å¾„é—®é¢˜

fs æ¨¡å—å¯¹èµ„æºè¿›è¡Œæ“ä½œæ—¶ï¼Œè·¯å¾„çš„å†™æ³•æœ‰ä¸¤ç§ï¼š

- ç›¸å¯¹è·¯å¾„
  - `./åº§å³é“­.txt` å½“å‰ç›®å½•ä¸‹çš„åº§å³é“­.txt
  - `åº§å³é“­.txt` ç­‰æ•ˆäºä¸Šé¢çš„å†™æ³•
  - `../åº§å³é“­.txt` å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ä¸­çš„åº§å³é“­.txt
- ç»å¯¹è·¯å¾„
  - `D:/Program Files windows` ç³»ç»Ÿä¸‹çš„ç»å¯¹è·¯å¾„
  - `/usr/bin Linux` ç³»ç»Ÿä¸‹çš„ç»å¯¹è·¯å¾„

> ç›¸å¯¹è·¯å¾„ä¸­æ‰€è°“çš„ `å½“å‰ç›®å½•` ï¼ŒæŒ‡çš„æ˜¯ `å‘½ä»¤è¡Œçš„å·¥ä½œç›®å½•` ï¼Œè€Œå¹¶éæ˜¯æ–‡ä»¶çš„æ‰€åœ¨ç›®å½•  
> æ‰€ä»¥å½“å‘½ä»¤è¡Œçš„å·¥ä½œç›®å½•ä¸æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸ä¸€è‡´æ—¶ï¼Œä¼šå‡ºç°ä¸€äº› [BUG](ä»£ç /02_fsæ–‡ä»¶ç³»ç»Ÿ/ä»£ç /12-ç›¸å¯¹è·¯å¾„çš„Bug.js)


### 8.__dirname

`__dirname` ä¸ `require` ç±»ä¼¼ï¼Œéƒ½æ˜¯ Node.js ç¯å¢ƒä¸­çš„'å…¨å±€'å˜é‡
`__dirname` ä¿å­˜ç€ `å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„` ï¼Œå¯ä»¥ä½¿ç”¨ `__dirname` ä¸æ–‡ä»¶åæ‹¼æ¥æˆç»å¯¹è·¯å¾„

ä»£ç ç¤ºä¾‹ï¼š

```js
let data = fs.readFileSync(__dirname + '/data.txt');
console.log(data);
```

> ä½¿ç”¨ fs æ¨¡å—çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨ __dirname å°†è·¯å¾„è½¬åŒ–ä¸ºç»å¯¹è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥é¿å…ç›¸å¯¹è·¯å¾„äº§ç”Ÿçš„ Bug

## å››ã€pathæ¨¡å—

path æ¨¡å—æä¾›äº† `æ“ä½œè·¯å¾„` çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä¸‹å‡ ä¸ªè¾ƒä¸ºå¸¸ç”¨çš„å‡ ä¸ª APIï¼š

| API           | è¯´æ˜                      |
| ------------- | ------------------------- |
| path.resolve  | æ‹¼æ¥è§„èŒƒçš„ç»å¯¹è·¯å¾„ `å¸¸ç”¨` |
| path.sep      | è·å–æ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦  |
| path.parse    | è§£æè·¯å¾„å¹¶è¿”å›å¯¹è±¡        |
| path.basename | è·å–è·¯å¾„çš„åŸºç¡€åç§°        |
| path.dirname  | è·å–è·¯å¾„çš„ç›®å½•å          |
| path.extname  | è·å¾—è·¯å¾„çš„æ‰©å±•å          |

ä»£ç ç¤ºä¾‹ï¼š

```js
const path = require('path');
//è·å–è·¯å¾„åˆ†éš”ç¬¦
console.log(path.sep);
//æ‹¼æ¥ç»å¯¹è·¯å¾„
console.log(path.resolve(__dirname, 'test'));
//è§£æè·¯å¾„
let pathname = 'D:/program file/nodejs/node.exe';
console.log(path.parse(pathname));
//è·å–è·¯å¾„åŸºç¡€åç§°
console.log(path.basename(pathname))
//è·å–è·¯å¾„çš„ç›®å½•å
console.log(path.dirname(pathname));
//è·å–è·¯å¾„çš„æ‰©å±•å
console.log(path.extname(pathname));
```

- `__dirname`: å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„
- `__filename`: å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„

## äº”ã€HTTP åè®®

### 1.æ¦‚å¿µ

HTTPï¼ˆhypertext transport protocolï¼‰åè®®ï¼›ä¸­æ–‡å«**è¶…æ–‡æœ¬ä¼ è¾“åè®®**
æ˜¯ä¸€ç§åŸºäºTCP/IPçš„åº”ç”¨å±‚é€šä¿¡åè®®
è¿™ä¸ªåè®®è¯¦ç»†è§„å®šäº† `æµè§ˆå™¨` å’Œä¸‡ç»´ç½‘ `æœåŠ¡å™¨` ä¹‹é—´äº’ç›¸é€šä¿¡çš„è§„åˆ™ã€‚

åè®®ä¸­ä¸»è¦è§„å®šäº†ä¸¤ä¸ªæ–¹é¢çš„å†…å®¹

- å®¢æˆ·ç«¯ï¼šç”¨æ¥å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œå¯ä»¥è¢«ç§°ä¹‹ä¸º**è¯·æ±‚æŠ¥æ–‡**
- æœåŠ¡ç«¯ï¼šå‘å®¢æˆ·ç«¯è¿”å›æ•°æ®ï¼Œå¯ä»¥è¢«ç§°ä¹‹ä¸º**å“åº”æŠ¥æ–‡**

> æŠ¥æ–‡ï¼šå¯ä»¥ç®€å•ç†è§£ä¸ºå°±æ˜¯ä¸€å †å­—ç¬¦ä¸²

### 2.è¯·æ±‚æŠ¥æ–‡çš„ç»„æˆ

- è¯·æ±‚è¡Œ
- è¯·æ±‚å¤´
- ç©ºè¡Œ
- è¯·æ±‚ä½“

### 3.HTTP çš„è¯·æ±‚è¡Œ

è¯·æ±‚æ–¹æ³•+URL+HTTPåè®®ç‰ˆæœ¬å·

- è¯·æ±‚æ–¹æ³•ï¼ˆgetã€postã€putã€deleteç­‰ï¼‰

  | è¯·æ±‚æ–¹æ³• | è§£é‡Š                       |
  | -------- | -------------------------- |
  | `GET`    | ä¸»è¦ç”¨äºè·å–æ•°æ®           |
  | `POST`   | ä¸»è¦ç”¨äºæäº¤æ•°æ®           |
  | PUT      | ä¸»è¦ç”¨äºæ›´æ–°æ•°æ®           |
  | DELETE   | ä¸»è¦ç”¨äºåˆ é™¤æ•°æ®           |
  | HEAD     | ä¸»è¦ç”¨äºè·å–å“åº”å¤´         |
  | OPTIONS  | ä¸»è¦ç”¨äºè·å–æ”¯æŒçš„è¯·æ±‚æ–¹æ³• |
  | CONNECT  | ä¸»è¦ç”¨äºå»ºç«‹è¿æ¥éš§é“       |
  | TRACE    | ä¸»è¦ç”¨äºè¿½è¸ªè¯·æ±‚çš„ä¼ è¾“è·¯å¾„ |

- è¯·æ±‚ URLï¼ˆç»Ÿä¸€èµ„æºå®šä½å™¨ï¼‰
  
  - ä¾‹å¦‚ï¼šhttp://www.baidu.com:80/index.html?a=100&b=200#logo
  - httpï¼š åè®®ï¼ˆhttpsã€ftpã€sshç­‰ï¼‰
  - www.baidu.com åŸŸå
  - 80 ç«¯å£å·
  - /index.html è·¯å¾„
  - a=100&b=200 æŸ¥è¯¢å­—ç¬¦ä¸²
  - #logo å“ˆå¸Œï¼ˆé”šç‚¹é“¾æ¥ï¼‰
  
- HTTPåè®®ç‰ˆæœ¬å·

  | ç‰ˆæœ¬å· | å‘å¸ƒæ—¶é—´ |
  | ------ | -------- |
  | 1.0    | 1996å¹´   |
  | 1.1    | 1999å¹´   |
  | 2      | 2015å¹´   |
  | 3      | 2018å¹´   |


### 4.HTTP è¯·æ±‚å¤´

æ ¼å¼ï¼šã€å¤´åï¼šå¤´å€¼ã€
å¸¸è§çš„è¯·æ±‚å¤´æœ‰ï¼š

| è¯·æ±‚å¤´                    | è§£é‡Š                                                         |
| ------------------------- | ------------------------------------------------------------ |
| Host                      | ä¸»æœºå                                                       |
| Connection                | è¿æ¥çš„è®¾ç½® keep-aliveï¼ˆä¿æŒè¿æ¥ï¼‰ï¼›closeï¼ˆå…³é—­è¿æ¥ï¼‰         |
| Cache-Control             | ç¼“å­˜æ§åˆ¶ max-age = 0 ï¼ˆæ²¡æœ‰ç¼“å­˜ï¼‰                            |
| Upgrade-Insecure-Requests | å°†ç½‘é¡µä¸­çš„httpè¯·æ±‚è½¬åŒ–ä¸ºhttpsè¯·æ±‚ï¼ˆå¾ˆå°‘ç”¨ï¼‰è€ç½‘ç«™å‡çº§        |
| User-Agent                | ç”¨æˆ·ä»£ç†ï¼Œå®¢æˆ·ç«¯å­—ç¬¦ä¸²æ ‡è¯†ï¼ŒæœåŠ¡å™¨å¯ä»¥é€šè¿‡è¿™ä¸ªæ ‡è¯†æ¥è¯†åˆ«è¿™ä¸ªè¯·æ±‚æ¥è‡ªå“ªä¸ªå®¢æˆ·ç«¯ ï¼Œä¸€èˆ¬åœ¨PCç«¯å’Œæ‰‹æœºç«¯çš„åŒºåˆ† |
| Accept                    | è®¾ç½®æµè§ˆå™¨æ¥æ”¶çš„æ•°æ®ç±»å‹                                     |
| Accept-Encoding           | è®¾ç½®æ¥æ”¶çš„å‹ç¼©æ–¹å¼                                           |
| Accept-Language           | è®¾ç½®æ¥æ”¶çš„è¯­è¨€ q=0.7 ä¸ºå–œå¥½ç³»æ•°ï¼Œæ»¡åˆ†ä¸º1                     |
| Cookie                    | åé¢å•ç‹¬è®²                                                   |

å‚è€ƒï¼š https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers


### 5.HTTP çš„è¯·æ±‚ä½“

è¯·æ±‚ä½“å†…å®¹çš„æ ¼å¼æ˜¯éå¸¸çµæ´»çš„ï¼Œ
ï¼ˆå¯ä»¥æ˜¯ç©ºï¼‰=> GETè¯·æ±‚ï¼Œ
ï¼ˆä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯JSONï¼‰=> POSTè¯·æ±‚

ä¾‹å¦‚ï¼š

- å­—ç¬¦ä¸²ï¼š`keywords=æ‰‹æœº&price=2000`
- JSONï¼š`{"keywords":"æ‰‹æœº","price":2000}`


### 6.å“åº”æŠ¥æ–‡çš„ç»„æˆ

- å“åº”è¡Œ
  
  > HTTP/1.1ï¼šHTTPåè®®ç‰ˆæœ¬å·
  
  - 200ï¼šå“åº”çŠ¶æ€ç  404 Not Found 500 Internal Server Error
  
  - è¿˜æœ‰ä¸€äº›çŠ¶æ€ç ï¼Œå‚è€ƒï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status
  
    | çŠ¶æ€ç  | å«ä¹‰           |
    | ------ | -------------- |
    | 1xx    | ä¿¡æ¯å“åº”       |
    | 2xx    | æˆåŠŸå“åº”       |
    | 3xx    | é‡å®šå‘æ¶ˆæ¯     |
    | 4xx    | å®¢æˆ·ç«¯é”™è¯¯å“åº” |
    | 5xx    | æœåŠ¡ç«¯é”™è¯¯å“åº” |
  
  - OKï¼šå“åº”çŠ¶æ€æè¿°
  
  > å“åº”çŠ¶æ€ç å’Œå“åº”å­—ç¬¦ä¸²å…³ç³»æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚
  
- å“åº”å¤´

  ```
  Cache-Control:ç¼“å­˜æ§åˆ¶ private ç§æœ‰çš„ï¼Œåªå…è®¸å®¢æˆ·ç«¯ç¼“å­˜æ•°æ®
  Connection é“¾æ¥è®¾ç½®
  Content-Type:text/html;charset=utf-8 è®¾ç½®å“åº”ä½“çš„æ•°æ®ç±»å‹ä»¥åŠå­—ç¬¦é›†,å“åº”ä½“ä¸ºhtmlï¼Œå­—ç¬¦é›† utf-8
  Content-Length:å“åº”ä½“çš„é•¿åº¦ï¼Œå•ä½ä¸ºå­—èŠ‚
  ```

- ç©ºè¡Œ

- å“åº”ä½“
  å“åº”ä½“å†…å®¹çš„ç±»å‹æ˜¯éå¸¸çµæ´»çš„ï¼Œå¸¸è§çš„ç±»å‹æœ‰ HTMLã€CSSã€JSã€å›¾ç‰‡ã€è§†é¢‘ã€JSON


### 7.åˆ›å»º HTTP æœåŠ¡

ä½¿ç”¨ nodejs åˆ›å»º HTTP æœåŠ¡

#### 7.1 æ“ä½œæ­¥éª¤

```js
//1. å¯¼å…¥ http æ¨¡å—
const http = require('http');
//2. åˆ›å»ºæœåŠ¡å¯¹è±¡ create åˆ›å»º server æœåŠ¡
// request æ„ä¸ºè¯·æ±‚. æ˜¯å¯¹è¯·æ±‚æŠ¥æ–‡çš„å°è£…å¯¹è±¡, é€šè¿‡ request å¯¹è±¡å¯ä»¥è·å¾—è¯·æ±‚æŠ¥æ–‡çš„æ•°æ®
// response æ„ä¸ºå“åº”. æ˜¯å¯¹å“åº”æŠ¥æ–‡çš„å°è£…å¯¹è±¡, é€šè¿‡ response å¯¹è±¡å¯ä»¥è®¾ç½®å“åº”æŠ¥æ–‡
const server = http.createServer((request, response) => {
    response.end('Hello HTTP server');
});
//3. ç›‘å¬ç«¯å£, å¯åŠ¨æœåŠ¡
server.listen(9000, () => {
    console.log('æœåŠ¡å·²ç»å¯åŠ¨, ç«¯å£ 9000 ç›‘å¬ä¸­...');
});
```

> http.createServer é‡Œçš„å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœºï¼š `å½“æ¥æ”¶åˆ° HTTP è¯·æ±‚çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œ`

#### 7.2 æµ‹è¯•

æµè§ˆå™¨è¯·æ±‚å¯¹åº”ç«¯å£

> http://127.0.0.1:9000

#### 7.3 æ³¨æ„äº‹é¡¹

1. å‘½ä»¤è¡Œ `ctrl + c` åœæ­¢æœåŠ¡

2. å½“æœåŠ¡å¯åŠ¨åï¼Œæ›´æ–°ä»£ç  å¿…é¡»é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ

3. å“åº”å†…å®¹ä¸­æ–‡ä¹±ç çš„è§£å†³åŠæ³•

   ```js
   response.setHeader('content-type', 'text/html;charset=utf-8');
   ```

4. ç«¯å£å·è¢«å ç”¨

   ```js
   Error: listen EADDRINUSE: address already in use :::9000
   ```

   1. å…³é—­å½“å‰æ­£åœ¨è¿è¡Œç›‘å¬ç«¯å£çš„æœåŠ¡ ï¼ˆ `ä½¿ç”¨è¾ƒå¤š` ï¼‰
   2. ä¿®æ”¹å…¶ä»–ç«¯å£å·

5. HTTP åè®®é»˜è®¤ç«¯å£æ˜¯ 80 ã€‚HTTPS åè®®çš„é»˜è®¤ç«¯å£æ˜¯ 443, HTTP æœåŠ¡å¼€å‘å¸¸ç”¨ç«¯å£æœ‰ 3000ï¼Œ8080ï¼Œ8090ï¼Œ9000 ç­‰


### 8.è·å– HTTP è¯·æ±‚æŠ¥æ–‡

æƒ³è¦è·å–è¯·æ±‚çš„æ•°æ®ï¼Œéœ€è¦é€šè¿‡ `request` å¯¹è±¡

| å«ä¹‰           | è¯­æ³•                                                         | é‡ç‚¹æŒæ¡ |
| -------------- | ------------------------------------------------------------ | -------- |
| è¯·æ±‚æ–¹æ³•       | `request.method`                                             | *        |
| è¯·æ±‚ç‰ˆæœ¬       | `request.httpVersion`                                        |          |
| è¯·æ±‚è·¯å¾„       | `request.url`                                                | *        |
| URL è·¯å¾„       | `require('url').parse(request.url).pathname`                 | *        |
| URL æŸ¥è¯¢å­—ç¬¦ä¸² | `require('url').parse(request.url, true).query`              | *        |
| è¯·æ±‚å¤´         | `request.headers`                                            | *        |
| è¯·æ±‚ä½“         | `request.on('data', function(chunk){})`<br>`request.on('end', function(){});` |          |

æ³¨æ„äº‹é¡¹ï¼š

1. request.url åªèƒ½è·å–è·¯å¾„ä»¥åŠæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ— æ³•è·å– URL ä¸­çš„åŸŸåä»¥åŠåè®®çš„å†…å®¹
2. request.headers å°†è¯·æ±‚ä¿¡æ¯è½¬åŒ–æˆä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å±æ€§åéƒ½è½¬åŒ–æˆäº†ã€å°å†™ã€
3. å…³äºè·¯å¾„ï¼šå¦‚æœè®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œåªå¡«å†™äº† IP åœ°å€æˆ–è€…æ˜¯åŸŸåä¿¡æ¯ï¼Œæ­¤æ—¶è¯·æ±‚çš„è·¯å¾„ä¸ºã€ `/` ã€

#### 8.1 ç»ƒä¹ 

æŒ‰ç…§ä»¥ä¸‹è¦æ±‚æ­å»º HTTP æœåŠ¡

| è¯·æ±‚ç±»å‹(æ–¹æ³•) | è¯·æ±‚åœ°å€ | å“åº”ä½“ç»“æœ |
| -------------- | -------- | ---------- |
| get            | /login   | ç™»å½•é¡µé¢   |
| get            | /reg     | æ³¨å†Œé¡µé¢   |

```js
//1ã€å¼•å…¥httpæ¨¡å—
const http = require("http");
//2ã€å»ºç«‹æœåŠ¡
const server = http.createServer((request, response) => {
    let { url, method } = request; //å¯¹è±¡çš„è§£æ„èµ‹å€¼
    //è®¾ç½®å“åº”å¤´ä¿¡æ¯
    //è§£å†³ä¸­æ–‡ä¹±ç 
    response.setHeader("Content-Type", "text/html;charset=utf-8");
    if (url == "/register" && method == "GET") {
        response.end("æ³¨å†Œé¡µé¢");
    } else if (url == "/login" && method == "GET") {
        response.end("ç™»å½•é¡µé¢");
    } else {
        response.end("<h1>404 Not Found</h1>");
    }
});
//3ã€ç›‘å¬ç«¯å£
server.listen(8000, () => {
    console.log('æœåŠ¡å¯åŠ¨ä¸­....');
});
```


### 9.è®¾ç½® HTTP å“åº”æŠ¥æ–‡

| ä½œç”¨             | è¯­æ³•                                        |
| ---------------- | ------------------------------------------- |
| è®¾ç½®å“åº”çŠ¶æ€ç    | response.statusCode                         |
| è®¾ç½®å“åº”çŠ¶æ€æè¿° | response.statusMessage ï¼ˆ `ç”¨çš„éå¸¸å°‘` ï¼‰   |
| è®¾ç½®å“åº”å¤´ä¿¡æ¯   | response.setHeader('å¤´å', 'å¤´å€¼')          |
| è®¾ç½®å“åº”ä½“       | response.write('xx')<br>response.end('xxx') |

write å’Œ end çš„ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š

```js
//1. write å’Œ end çš„ç»“åˆä½¿ç”¨ å“åº”ä½“ç›¸å¯¹åˆ†æ•£
response.write('xx');
response.write('xx');
response.write('xx');
response.end(); //æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨å¤„ç†çš„æ—¶å€™å¿…é¡»è¦æ‰§è¡Œ end æ–¹æ³•çš„
//2. å•ç‹¬ä½¿ç”¨ end æ–¹æ³• å“åº”ä½“ç›¸å¯¹é›†ä¸­
response.end('xxx');
```

#### 9.1 ç»ƒä¹ 

æ­å»º HTTP æœåŠ¡ï¼Œå“åº”ä¸€ä¸ª 4 è¡Œ 3 åˆ—çš„è¡¨æ ¼ï¼Œå¹¶ä¸”è¦æ±‚è¡¨æ ¼æœ‰ `éš”è¡Œæ¢è‰²æ•ˆæœ` ï¼Œä¸” `ç‚¹å‡»` å•å…ƒæ ¼èƒ½ `é«˜äº®æ˜¾ç¤º`

```js
//å¯¼å…¥ http æ¨¡å—
const http = require('http');
//åˆ›å»ºæœåŠ¡å¯¹è±¡
const server = http.createServer((request, response) => {
    response.end(`
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <style>
            td {
                padding: 20px 40px;
            }
            table tr:nth-child(odd) {
                background: #aef;
            }
            table tr:nth-child(even) {
                background: #fcb;
            }
            table, td {
                border-collapse: collapse;
            }
        </style>
    </head>
    <body>
        <table border="1">
            <tr><td></td><td></td><td></td></tr>
            <tr><td></td><td></td><td></td></tr>
            <tr><td></td><td></td><td></td></tr>
            <tr><td></td><td></td><td></td></tr>
        </table>
        <script>
            //è·å–æ‰€æœ‰çš„ td
            let tds = document.querySelectorAll('td');
            //éå†
            tds.forEach(item => {
                item.onclick = function () {
                    this.style.background = '#222';
                }
            })
        </script>
    </body>
    </html>
    `); //è®¾ç½®å“åº”ä½“
});
//ç›‘å¬ç«¯å£, å¯åŠ¨æœåŠ¡
server.listen(9000, () => {
    console.log('æœåŠ¡å·²ç»å¯åŠ¨....')
});
```

### 10.ç½‘é¡µèµ„æºçš„åŸºæœ¬åŠ è½½è¿‡ç¨‹

ç½‘é¡µèµ„æºçš„åŠ è½½éƒ½æ˜¯å¾ªåºæ¸è¿›çš„ï¼Œé¦–å…ˆè·å– HTML çš„å†…å®¹ï¼Œ ç„¶åè§£æ HTML åœ¨å‘é€å…¶ä»–èµ„æºçš„è¯·æ±‚ï¼Œå¦‚ CSSï¼ŒJavascriptï¼Œå›¾ç‰‡ç­‰ã€‚


### 11.é™æ€èµ„æºæœåŠ¡

é™æ€èµ„æºæ˜¯æŒ‡ `å†…å®¹é•¿æ—¶é—´ä¸å‘ç”Ÿæ”¹å˜çš„èµ„æº` ï¼Œä¾‹å¦‚å›¾ç‰‡ï¼Œè§†é¢‘ï¼ŒCSS æ–‡ä»¶ï¼ŒJSæ–‡ä»¶ï¼ŒHTMLæ–‡ä»¶ï¼Œå­—ä½“æ–‡ä»¶ç­‰

åŠ¨æ€èµ„æºæ˜¯æŒ‡ `å†…å®¹ç»å¸¸æ›´æ–°çš„èµ„æº` ï¼Œä¾‹å¦‚ç™¾åº¦é¦–é¡µï¼Œç½‘æ˜“é¦–é¡µï¼Œäº¬ä¸œæœç´¢åˆ—è¡¨é¡µé¢ç­‰

#### 11.1 ç½‘ç«™æ ¹ç›®å½•æˆ–é™æ€èµ„æºç›®å½•

HTTP æœåŠ¡åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ä¸­å¯»æ‰¾é™æ€èµ„æºï¼Œé‚£ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ `é™æ€èµ„æºç›®å½•` ï¼Œä¹Ÿç§°ä¹‹ä¸º `ç½‘ç«™æ ¹ç›®å½•`

> æ€è€ƒï¼švscode ä¸­ä½¿ç”¨ live-server è®¿é—® HTML æ—¶ï¼Œ å®ƒå¯åŠ¨çš„æœåŠ¡ä¸­ç½‘ç«™æ ¹ç›®å½•æ˜¯è°ï¼Ÿ

#### 11.2 ç½‘é¡µä¸­çš„ URL

ç½‘é¡µä¸­çš„ URL ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼šç›¸å¯¹è·¯å¾„ä¸ç»å¯¹è·¯å¾„

##### 11.2.1 ç»å¯¹è·¯å¾„

ç»å¯¹è·¯å¾„å¯é æ€§å¼ºï¼Œè€Œä¸”ç›¸å¯¹å®¹æ˜“ç†è§£ï¼Œåœ¨é¡¹ç›®ä¸­è¿ç”¨è¾ƒå¤š

| å½¢å¼             | ç‰¹ç‚¹                                                         |
| ---------------- | ------------------------------------------------------------ |
| http://baidu.com | ç›´æ¥å‘ç›®æ ‡èµ„æºå‘é€è¯·æ±‚ï¼Œå®¹æ˜“ç†è§£ã€‚ç½‘ç«™çš„å¤–é“¾ä¼šç”¨åˆ°æ­¤å½¢å¼     |
| //baidu.com/web  | ä¸é¡µé¢ URL çš„åè®®æ‹¼æ¥å½¢æˆå®Œæ•´ URL å†å‘é€è¯·æ±‚ã€‚å¤§å‹ç½‘ç«™ç”¨çš„æ¯”è¾ƒå¤š |
| /web             | ä¸é¡µé¢ URL çš„åè®®ã€ä¸»æœºåã€ç«¯å£æ‹¼æ¥å½¢æˆå®Œæ•´ URL å†å‘é€è¯·æ±‚ã€‚ä¸­å°å‹ç½‘ç«™ |

##### 11.2.2 ç›¸å¯¹è·¯å¾„

ç›¸å¯¹è·¯å¾„åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œéœ€è¦ä¸å½“å‰é¡µé¢ URL è·¯å¾„è¿›è¡Œ `è®¡ç®—` ï¼Œå¾—åˆ°å®Œæ•´ URL åï¼Œå†å‘é€è¯·æ±‚ï¼Œå­¦ä¹ é˜¶æ®µç”¨çš„è¾ƒå¤š

##### 11.2.3 ç½‘é¡µä¸­ä½¿ç”¨ URL çš„åœºæ™¯å°ç»“

åŒ…æ‹¬ä½†ä¸é™äºå¦‚ä¸‹åœºæ™¯ï¼š

- a æ ‡ç­¾ href
- link æ ‡ç­¾ href
- script æ ‡ç­¾ src
- img æ ‡ç­¾ src
- video audio æ ‡ç­¾ src
- form ä¸­çš„ action
- AJAX è¯·æ±‚ä¸­çš„ URL

11.3 è®¾ç½®èµ„æºç±»å‹

åª’ä½“ç±»å‹ï¼ˆé€šå¸¸ç§°ä¸º Multipurpose Internet Mail Extensions æˆ– MIME ç±»å‹ ï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨æ¥è¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼ã€‚

```
mime ç±»å‹ç»“æ„ï¼š [type]/[subType]
ä¾‹å¦‚ï¼š text/html text/css image/jpeg image/png application/json
```

HTTP æœåŠ¡å¯ä»¥è®¾ç½®å“åº”å¤´ Content-Type æ¥è¡¨æ˜å“åº”ä½“çš„ MIME ç±»å‹ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®è¯¥ç±»å‹å†³å®šå¦‚ä½•å¤„ç†èµ„æº

ä¸‹é¢æ˜¯å¸¸è§æ–‡ä»¶å¯¹åº”çš„ mime ç±»å‹

| æ–‡ä»¶æ‰©å±•å | MIME ç±»å‹        |
| ---------- | ---------------- |
| html       | text/html        |
| css        | text/css         |
| js         | text/javascript  |
| png        | image/png        |
| jpg        | image/jpeg       |
| gif        | image/gif        |
| mp4        | video/mp4        |
| mp3        | audio/mpeg       |
| json       | application/json |

> å¯¹äºæœªçŸ¥çš„èµ„æºç±»å‹ï¼Œå¯ä»¥é€‰æ‹© `application/octet-stream` ç±»å‹ï¼Œæµè§ˆå™¨åœ¨é‡åˆ°è¯¥ç±»å‹çš„å“åº”æ—¶ï¼Œä¼šå¯¹å“åº”ä½“å†…å®¹è¿›è¡Œç‹¬ç«‹å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„ `ä¸‹è½½` æ•ˆæœ

```js
require('http').createServer((request, response) => {
    //è·å–è¯·æ±‚çš„æ–¹æ³•å·²ç»è·¯å¾„
    let { url, method } = request;
    //åˆ¤æ–­è¯·æ±‚æ–¹å¼ä»¥åŠè¯·æ±‚è·¯å¾„
    if (method == "GET" && url == "/index.html") {
        //éœ€è¦å“åº”æ–‡ä»¶ä¸­çš„å†…å®¹
        let data = require('fs').readFileSync(__dirname + '/index.html');
        response.end(data);
    } else if (method == "GET" && url == "/css/app.css") {
        //éœ€è¦å“åº”æ–‡ä»¶ä¸­çš„å†…å®¹
        let data = require('fs').readFileSync(__dirname + '/public/css/app.css');
        response.end(data);
    } else if (method == "GET" && url == "/js/app.js") {
        //éœ€è¦å“åº”æ–‡ä»¶ä¸­çš„å†…å®¹
        let data = require('fs').readFileSync(__dirname + '/public/js/app.js');
        response.end(data);
    }
    else {
        //404å“åº”
        response.statusCode = 404;
        response.end("<h1>404 Not Found</h1>");
    }
}).listen(80, () => {
    console.log('80ç«¯å£æ­£åœ¨å¯åŠ¨ä¸­....');
});
```

å¾ˆæ˜æ˜¾ä¸Šé¢çš„ä»£ç ï¼Œå½“åªè¦æœ‰ä¸€ä¸ªè¯·æ±‚è·¯å¾„å°±éœ€è¦è¿›è¡Œåˆ¤æ–­ï¼Œæ˜¾ç„¶è¿™ç§æ–¹å¼ä¸å¤Ÿå®Œç¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°è£…

```js
require('http').createServer((request, response) => {
    //è·å–è¯·æ±‚çš„æ–¹æ³•å·²ç»è·¯å¾„
    let { url, method } = request;
    //æ–‡ä»¶å¤¹è·¯å¾„
    let rootDir = __dirname + '/public';
    //æ‹¼æ¥æ–‡ä»¶è·¯å¾„
    let filePath = rootDir + url;
    //è¯»å–æ–‡ä»¶å†…å®¹
    fs.readFile(filePath, (err, data) => {
        //åˆ¤æ–­
        if (err) {
            //å¦‚æœå‡ºç°é”™è¯¯ï¼Œå“åº”404çŠ¶æ€ç 
            response.statusCode = 404;
            response.end('<h1>404 Not Found</h1>');
        } else {
            //å“åº”æ–‡ä»¶å†…å®¹
            response.end(data);
        }
    })
}).listen(80, () => {
    console.log('80ç«¯å£æ­£åœ¨å¯åŠ¨ä¸­....');
});
```

#### 11.3 GET å’Œ POST è¯·æ±‚åœº3æ™¯å°ç»“

GET è¯·æ±‚çš„æƒ…å†µï¼š

- åœ¨åœ°å€æ ç›´æ¥è¾“å…¥ url è®¿é—®
- ç‚¹å‡» a é“¾æ¥
- link æ ‡ç­¾å¼•å…¥ css
- script æ ‡ç­¾å¼•å…¥ js
- img æ ‡ç­¾å¼•å…¥å›¾ç‰‡
- form æ ‡ç­¾ä¸­çš„ method ä¸º get ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
- ajax ä¸­çš„ get è¯·æ±‚

POST è¯·æ±‚çš„æƒ…å†µï¼š

- form æ ‡ç­¾ä¸­çš„ method ä¸º postï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
- AJAX çš„ post è¯·æ±‚

#### 12.GETå’ŒPOSTè¯·æ±‚çš„åŒºåˆ«

GET å’Œ POST æ˜¯ HTTP åè®®è¯·æ±‚çš„ä¸¤ç§æ–¹å¼ã€‚

- ä½œç”¨ã€‚GET ä¸»è¦ç”¨æ¥è·å–æ•°æ®ï¼ŒPOST ä¸»è¦ç”¨æ¥æäº¤æ•°æ®
- å‚æ•°ä½ç½®ã€‚GET å¸¦å‚æ•°è¯·æ±‚æ˜¯å°†å‚æ•°ç¼€åˆ° URL ä¹‹åï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥ url è®¿é—®ç½‘ç«™å°±æ˜¯ GET è¯·æ±‚ï¼ŒPOST å¸¦å‚æ•°è¯·æ±‚æ˜¯å°†å‚æ•°æ”¾åˆ°è¯·æ±‚ä½“ä¸­ ï¼ˆè¿™åªæ˜¯é»˜è®¤çš„è¡Œä¸ºï¼‰
- å®‰å…¨æ€§ã€‚POST è¯·æ±‚**ç›¸å¯¹** GET å®‰å…¨ä¸€äº›ï¼Œå› ä¸ºåœ¨æµè§ˆå™¨ä¸­å‚æ•°ä¼šæš´éœ²åœ¨åœ°å€æ 
- GET è¯·æ±‚å¤§å°æœ‰é™åˆ¶ï¼Œä¸€èˆ¬ä¸º 2Kï¼Œè€Œ POST è¯·æ±‚åˆ™æ²¡æœ‰å¤§å°é™åˆ¶

## å…­ã€Node.js æ¨¡å—åŒ–

### 1.ä»‹ç»

#### 1.1 ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–ä¸æ¨¡å— ?

å°†ä¸€ä¸ªå¤æ‚çš„ç¨‹åºæ–‡ä»¶ä¾æ®ä¸€å®šè§„åˆ™ï¼ˆè§„èŒƒï¼‰æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶çš„è¿‡ç¨‹ç§°ä¹‹ä¸º `æ¨¡å—åŒ–`

å…¶ä¸­æ‹†åˆ†å‡ºçš„ `æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—` ï¼Œæ¨¡å—çš„å†…éƒ¨æ•°æ®æ˜¯ç§æœ‰çš„ï¼Œä¸è¿‡æ¨¡å—å¯ä»¥æš´éœ²å†…éƒ¨æ•°æ®ä»¥ä¾¿å…¶ä»–æ¨¡å—ä½¿ç”¨

#### 1.2 ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–é¡¹ç›® ?

ç¼–ç æ—¶æ˜¯æŒ‰ç…§æ¨¡å—ä¸€ä¸ªä¸€ä¸ªç¼–ç çš„ï¼Œ æ•´ä¸ªé¡¹ç›®å°±æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„é¡¹ç›®

#### 1.3 æ¨¡å—åŒ–å¥½å¤„

ä¸‹é¢æ˜¯æ¨¡å—åŒ–çš„ä¸€äº›å¥½å¤„ï¼š

1. é˜²æ­¢å‘½åå†²çª
2. é«˜å¤ç”¨æ€§
3. é«˜ç»´æŠ¤æ€§


### 2.æ¨¡å—æš´éœ²æ•°æ®

#### 2.1 æ¨¡å—åˆä½“éªŒ

å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ“ä½œæ­¥éª¤ï¼Œå¿«é€Ÿä½“éªŒæ¨¡å—åŒ–

1. åˆ›å»º [me.js](ä»£ç /05_æ¨¡å—åŒ–/ä»£ç /01_åˆä½“éªŒ/me.js)

   ```js
   //å£°æ˜å‡½æ•°
   function tiemo() {
       console.log('è´´è†œ....');
   }
   //æš´éœ²æ•°æ®
   module.exports = tiemo;
   ```

2. åˆ›å»º [index.js](ä»£ç /05_æ¨¡å—åŒ–/ä»£ç /01_åˆä½“éªŒ/index.js)

   ```js
   //å¯¼å…¥æ¨¡å—
   const tiemo = require('./me.js');
   //è°ƒç”¨å‡½æ•°
   tiemo();
   ```

#### 2.2 æš´éœ²æ•°æ®

æ¨¡å—æš´éœ²æ•°æ®çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š

1. module.exports = value
2. exports.name = value

> ä½¿ç”¨æ—¶æœ‰å‡ ç‚¹æ³¨æ„ï¼š
>
> - module.exports å¯ä»¥æš´éœ² `ä»»æ„` æ•°æ®
> - ä¸èƒ½ä½¿ç”¨ `exports = value` çš„å½¢å¼æš´éœ²æ•°æ®ï¼Œæ¨¡å—å†…éƒ¨ module ä¸ exports çš„éšå¼å…³ç³» `exports = module.exports = {}`  `exports === module.exports`  
>   require è¿”å›çš„æ˜¯ç›®æ ‡æ¨¡å—ä¸­ `module.exports` çš„å€¼  


### 3.å¯¼å…¥ï¼ˆå¼•å…¥ï¼‰æ¨¡å—

åœ¨æ¨¡å—ä¸­ä½¿ç”¨ require ä¼ å…¥æ–‡ä»¶è·¯å¾„å³å¯å¼•å…¥æ–‡ä»¶

```js
const test = require('./me.js');
```

require ä½¿ç”¨çš„ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š

1. å¯¹äºè‡ªå·±åˆ›å»ºçš„æ¨¡å—ï¼Œå¯¼å…¥æ—¶è·¯å¾„å»ºè®®å†™ `ç›¸å¯¹è·¯å¾„` ï¼Œä¸”ä¸èƒ½çœç•¥ `./` å’Œ `../`
2. `js` å’Œ `json` æ–‡ä»¶å¯¼å…¥æ—¶å¯ä»¥ä¸ç”¨å†™åç¼€ï¼ˆä¼˜å…ˆæŸ¥æ‰¾jsæ–‡ä»¶ï¼‰ï¼Œc/c++ç¼–å†™çš„ `node` æ‰©å±•æ–‡ä»¶ä¹Ÿå¯ä»¥ä¸å†™åç¼€ï¼Œä½†æ˜¯ä¸€èˆ¬ç”¨ä¸åˆ°
3. å¦‚æœå¯¼å…¥å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œä¼šä»¥ `js` æ–‡ä»¶è¿›è¡Œå¤„ç†
4. å¦‚æœå¯¼å…¥çš„è·¯å¾„æ˜¯ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ™ä¼š `é¦–å…ˆ` æ£€æµ‹è¯¥æ–‡ä»¶å¤¹ä¸‹ `package.json` æ–‡ä»¶ä¸­ `main` å±æ€§å¯¹åº”çš„æ–‡ä»¶ï¼Œ
   - å¦‚æœå­˜åœ¨åˆ™å¯¼å…¥ï¼Œåä¹‹å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ä¼šæŠ¥é”™ã€‚
   - å¦‚æœ `main` å±æ€§ä¸å­˜åœ¨ï¼Œæˆ–è€… `package.json` ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå°è¯•å¯¼å…¥æ–‡ä»¶å¤¹ä¸‹çš„ `index.js` å’Œ `index.json` ï¼Œå¦‚æœè¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼Œå°±ä¼šæŠ¥é”™
5. å¯¼å…¥ node.js å†…ç½®æ¨¡å—æ—¶ï¼Œç›´æ¥ require æ¨¡å—çš„åå­—å³å¯ï¼Œæ— éœ€åŠ  `./` å’Œ `../`


### 4.å¯¼å…¥æ¨¡å—çš„åŸºæœ¬æµç¨‹

è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ `require` å¯¼å…¥ `è‡ªå®šä¹‰æ¨¡å—` çš„åŸºæœ¬æµç¨‹

1. å°†ç›¸å¯¹è·¯å¾„è½¬ä¸ºç»å¯¹è·¯å¾„ï¼Œå®šä½ç›®æ ‡æ–‡ä»¶
2. ç¼“å­˜æ£€æµ‹
3. è¯»å–ç›®æ ‡æ–‡ä»¶ä»£ç 
4. åŒ…è£¹ä¸ºä¸€ä¸ªå‡½æ•°å¹¶æ‰§è¡Œï¼ˆè‡ªæ‰§è¡Œå‡½æ•°ï¼‰ã€‚é€šè¿‡ `arguments.callee.toString()` æŸ¥çœ‹è‡ªæ‰§è¡Œå‡½æ•°
5. ç¼“å­˜æ¨¡å—çš„å€¼
6. è¿”å› `module.exports` çš„å€¼


### 5.CommonJS è§„èŒƒ

`module.exports` ã€ `exports` ä»¥åŠ `require` è¿™äº›éƒ½æ˜¯ `CommonJS` æ¨¡å—åŒ–è§„èŒƒä¸­çš„å†…å®¹ã€‚
è€Œ `Node.js` æ˜¯å®ç°äº† `CommonJS` æ¨¡å—åŒ–è§„èŒƒï¼ŒäºŒè€…å…³ç³»æœ‰ç‚¹åƒ `JavaScript` ä¸ `ECMAScript`

## ä¸ƒã€åŒ…ç®¡ç†å·¥å…·

### 1.æ¦‚å¿µä»‹ç»

#### 1.1 åŒ…æ˜¯ä»€ä¹ˆ

ã€åŒ…ã€è‹±æ–‡å•è¯æ˜¯ `package` ï¼Œä»£è¡¨äº†ä¸€ç»„ç‰¹å®šåŠŸèƒ½çš„æºç é›†åˆ

#### 1.2 åŒ…ç®¡ç†å·¥å…·

ç®¡ç†ã€åŒ…ã€çš„åº”ç”¨è½¯ä»¶ï¼Œå¯ä»¥å¯¹ã€ŒåŒ…ã€è¿›è¡Œ `ä¸‹è½½å®‰è£…` ï¼Œ `æ›´æ–°` ï¼Œ `åˆ é™¤` ï¼Œ `ä¸Šä¼ ` ç­‰æ“ä½œ
å€ŸåŠ©åŒ…ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘é¡¹ç›®ï¼Œæå‡å¼€å‘æ•ˆç‡
åŒ…ç®¡ç†å·¥å…·æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰åŒ…ç®¡ç†å·¥å…·ï¼Œæ‰€ä»¥ `æŒæ¡å¥½åŒ…ç®¡ç†å·¥å…·éå¸¸é‡è¦`

#### 1.3 å¸¸ç”¨çš„åŒ…ç®¡ç†å·¥å…·

ä¸‹é¢åˆ—ä¸¾äº†å‰ç«¯å¸¸ç”¨çš„åŒ…ç®¡ç†å·¥å…·

- `npm`
- yarn
- cnpm


### 2.npm

npm å…¨ç§° `Node Package Manager` ï¼Œç¿»è¯‘ä¸ºä¸­æ–‡æ„æ€æ˜¯ã€Node çš„åŒ…ç®¡ç†å·¥å…·ã€
npm æ˜¯ node.js å®˜æ–¹å†…ç½®çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæ˜¯ `å¿…é¡»è¦æŒæ¡ä½çš„å·¥å…·`

#### 2.1 npm çš„å®‰è£…

node.js åœ¨å®‰è£…æ—¶ä¼š `è‡ªåŠ¨å®‰è£… npm` ï¼Œæ‰€ä»¥å¦‚æœä½ å·²ç»å®‰è£…äº† node.jsï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ npm
å¯ä»¥é€šè¿‡ `npm -v` æŸ¥çœ‹ç‰ˆæœ¬å·æµ‹è¯•ï¼Œå¦‚æœæ˜¾ç¤ºç‰ˆæœ¬å·è¯´æ˜å®‰è£…æˆåŠŸï¼Œåä¹‹å®‰è£…å¤±è´¥

> æŸ¥çœ‹ç‰ˆæœ¬æ—¶å¯èƒ½ä¸ä¸Šå›¾ç‰ˆæœ¬å·ä¸ä¸€æ ·ï¼Œä¸è¿‡ä¸å½±å“æ­£å¸¸ä½¿ç”¨

#### 2.2 npm åŸºæœ¬ä½¿ç”¨

##### 2.2.1 åˆå§‹åŒ–

åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼Œç„¶åä»¥æ­¤ç›®å½•ä½œä¸ºå·¥ä½œç›®å½• `å¯åŠ¨å‘½ä»¤è¡Œå·¥å…·` ï¼Œæ‰§è¡Œ `npm init`

`npm init` å‘½ä»¤çš„ä½œç”¨æ˜¯å°†æ–‡ä»¶å¤¹åˆå§‹åŒ–ä¸ºä¸€ä¸ªã€åŒ…ã€ï¼Œ `äº¤äº’å¼åˆ›å»º package.json æ–‡ä»¶`
`package.json` æ˜¯åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªåŒ…éƒ½å¿…é¡»è¦æœ‰ `package.json`
`package.json` å†…å®¹ç¤ºä¾‹ï¼š

```json
{
    "name": "01_npm",
    "version": "1.0.0",
    "description": "",
    "main": "index.js",
    "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1"
    },
    "author": "",
    "license": "ISC"
}
```

å±æ€§ç¿»è¯‘

```json
{
    "name": "1-npm", //åŒ…çš„åå­—
    "version": "1.0.0", //åŒ…çš„ç‰ˆæœ¬
    "description": "", //åŒ…çš„æè¿°
    "main": "index.js", //åŒ…çš„å…¥å£æ–‡ä»¶
    "scripts": { //è„šæœ¬é…ç½®
        "test": "echo \"Error: no test specified\" && exit 1"
    },
    "author": "", //ä½œè€…
    "license": "ISC" //å¼€æºè¯ä¹¦
}
```

åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­è¿˜æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š

1. package name ( `åŒ…å` ) ä¸èƒ½ä½¿ç”¨ä¸­æ–‡ã€å¤§å†™ï¼Œé»˜è®¤å€¼æ˜¯ `æ–‡ä»¶å¤¹çš„åç§°` ï¼Œæ‰€ä»¥æ–‡ä»¶å¤¹åç§°ä¹Ÿä¸èƒ½ä½¿ç”¨ä¸­æ–‡å’Œå¤§å†™
2. version ( `ç‰ˆæœ¬å·` )è¦æ±‚ `x.x.x` çš„å½¢å¼å®šä¹‰ï¼Œ `x` å¿…é¡»æ˜¯æ•°å­—ï¼Œé»˜è®¤å€¼æ˜¯ `1.0.0`
3. ISC è¯ä¹¦ä¸ MIT è¯ä¹¦åŠŸèƒ½ä¸Šæ˜¯ç›¸åŒçš„ï¼Œ[å…³äºå¼€æºè¯ä¹¦æ‰©å±•é˜…è¯»](http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html)
4. `package.json` å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸ä¿®æ”¹
5. ä½¿ç”¨ `npm init -y` æˆ–è€… `npm init --yes` æé€Ÿåˆ›å»º `package.json`

##### 2.2.2 æœç´¢åŒ…

æœç´¢åŒ…çš„æ–¹å¼æœ‰ä¸¤ç§

1. å‘½ä»¤è¡Œ ã€npm s/search å…³é”®å­—ã€
2. [ç½‘ç«™æœç´¢](https://www.npmjs.com/)

> ç»å¸¸æœ‰åŒå­¦é—®ï¼Œã€æˆ‘æ€æ ·æ‰èƒ½ç²¾å‡†æ‰¾åˆ°æˆ‘éœ€è¦çš„åŒ…ï¼Ÿã€  
> è¿™ä¸ªäº‹å„¿éœ€è¦å¤§å®¶åœ¨å®è·µä¸­ä¸æ–­çš„ç§¯ç´¯ï¼Œé€šè¿‡çœ‹æ–‡ç« ï¼Œçœ‹é¡¹ç›®å»å­¦ä¹ å»ç§¯ç´¯  

##### 2.2.3 ä¸‹è½½å®‰è£…åŒ…

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `npm install` å’Œ `npm i` å‘½ä»¤å®‰è£…åŒ…

```bash
æ ¼å¼
npm install <åŒ…å>
npm i <åŒ…å>
# ç¤ºä¾‹
npm install uniq
npm i uniq
```

è¿è¡Œä¹‹åæ–‡ä»¶å¤¹ä¸‹ä¼šå¢åŠ ä¸¤ä¸ªèµ„æº

- `node_modules æ–‡ä»¶å¤¹` å­˜æ”¾ä¸‹è½½çš„åŒ…
- `package-lock.json åŒ…çš„é”æ–‡ä»¶` ï¼Œç”¨æ¥é”å®šåŒ…çš„ç‰ˆæœ¬

> å®‰è£… uniq ä¹‹åï¼Œ uniq å°±æ˜¯å½“å‰è¿™ä¸ªåŒ…çš„ä¸€ä¸ª `ä¾èµ–åŒ…` ï¼Œæœ‰æ—¶ä¼šç®€ç§°ä¸º `ä¾èµ–`  
> æ¯”å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…åå­—ä¸º Aï¼ŒA ä¸­å®‰è£…äº†åŒ…åå­—æ˜¯ Bï¼Œæˆ‘ä»¬å°±è¯´ `B æ˜¯ A çš„ä¸€ä¸ªä¾èµ–åŒ…` ï¼Œä¹Ÿä¼šè¯´ `A ä¾èµ– B`  

##### 2.2.4 require å¯¼å…¥ npm åŒ…åŸºæœ¬æµç¨‹

1. åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹ node_modules ä¸­å¯»æ‰¾åŒåçš„æ–‡ä»¶å¤¹
2. åœ¨ä¸Šçº§ç›®å½•ä¸­ä¸‹çš„ node_modules ä¸­å¯»æ‰¾åŒåçš„æ–‡ä»¶å¤¹ï¼Œç›´è‡³æ‰¾åˆ°ç£ç›˜æ ¹ç›®å½•

#### 2.3 ç”Ÿäº§ç¯å¢ƒä¸å¼€å‘ç¯å¢ƒ

å¼€å‘ç¯å¢ƒæ˜¯ç¨‹åºå‘˜ `ä¸“é—¨ç”¨æ¥å†™ä»£ç ` çš„ç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯æŒ‡ç¨‹åºå‘˜çš„ç”µè„‘ï¼Œå¼€å‘ç¯å¢ƒçš„é¡¹ç›®ä¸€èˆ¬ `åªèƒ½ç¨‹åºå‘˜è‡ªå·±è®¿é—®`
ç”Ÿäº§ç¯å¢ƒæ˜¯é¡¹ç›® `ä»£ç æ­£å¼è¿è¡Œ` çš„ç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯æŒ‡æ­£å¼çš„æœåŠ¡å™¨ç”µè„‘ï¼Œç”Ÿäº§ç¯å¢ƒçš„é¡¹ç›®ä¸€èˆ¬ `æ¯ä¸ªå®¢æˆ·éƒ½å¯ä»¥è®¿é—®`

#### 2.4 ç”Ÿäº§ä¾èµ–ä¸å¼€å‘ä¾èµ–

æˆ‘ä»¬å¯ä»¥åœ¨å®‰è£…æ—¶è®¾ç½®é€‰é¡¹æ¥åŒºåˆ† `ä¾èµ–çš„ç±»å‹` ï¼Œç›®å‰åˆ†ä¸ºä¸¤ç±»ï¼š

| ç±»å‹     | å‘½ä»¤                                     | è¡¥å……                                                         |
| -------- | ---------------------------------------- | ------------------------------------------------------------ |
| ç”Ÿäº§ä¾èµ– | npm i -S uniq <br> npm i --save uniq     | -S ç­‰æ•ˆäº --saveï¼Œ -S æ˜¯é»˜è®¤é€‰é¡¹ <br> åŒ…ä¿¡æ¯ä¿å­˜åœ¨ package.json ä¸­ dependencies å±æ€§ |
| å¼€å‘ä¾èµ– | npm i -D less <br> npm i --save-dev less | -D ç­‰æ•ˆäº --save-dev <br> åŒ…ä¿¡æ¯ä¿å­˜åœ¨ package.json ä¸­ devDependencies å±æ€§ |

> ä¸¾ä¸ªä¾‹å­æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæ¯”å¦‚è¯´åšè›‹ç‚’é¥­éœ€è¦ `å¤§ç±³` ï¼Œ `æ²¹` ï¼Œ `è‘±` ï¼Œ `é¸¡è›‹` ï¼Œ `é”…` ï¼Œ `ç…¤æ°”` ï¼Œ `é“²å­` ç­‰  
> å…¶ä¸­ `é”…` ï¼Œ `ç…¤æ°”` ï¼Œ `é“²å­` å±äºå¼€å‘ä¾èµ–ï¼Œåªåœ¨åˆ¶ä½œé˜¶æ®µä½¿ç”¨  
> è€Œ `å¤§ç±³` ï¼Œ `æ²¹` ï¼Œ `è‘±` ï¼Œ `é¸¡è›‹` å±äºç”Ÿäº§ä¾èµ–ï¼Œåœ¨åˆ¶ä½œä¸æœ€ç»ˆé£Ÿç”¨éƒ½ä¼šç”¨åˆ°  
> æ‰€ä»¥ `å¼€å‘ä¾èµ–` æ˜¯åªåœ¨å¼€å‘é˜¶æ®µä½¿ç”¨çš„ä¾èµ–åŒ…ï¼Œè€Œ `ç”Ÿäº§ä¾èµ–` æ˜¯å¼€å‘é˜¶æ®µå’Œæœ€ç»ˆä¸Šçº¿è¿è¡Œé˜¶æ®µéƒ½ç”¨åˆ°çš„ä¾èµ–åŒ…  

#### 2.5 å…¨å±€å®‰è£…

æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå®‰è£…é€‰é¡¹ `-g` è¿›è¡Œå…¨å±€å®‰è£…

```bash
npm i -g nodemon
```

> [ä½“éªŒ nodemon](ä»£ç /06_åŒ…ç®¡ç†å·¥å…·/ä»£ç /01_npm/03_http.js)

å…¨å±€å®‰è£…å®Œæˆä¹‹åå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œçš„ä»»ä½•ä½ç½®è¿è¡Œ `nodemon` å‘½ä»¤
è¯¥å‘½ä»¤çš„ä½œç”¨æ˜¯ è‡ªåŠ¨é‡å¯ `node` åº”ç”¨ç¨‹åº

> è¯´æ˜ï¼š
>
> - å…¨å±€å®‰è£…çš„å‘½ä»¤ä¸å—å·¥ä½œç›®å½•ä½ç½®å½±å“
> - å¯ä»¥é€šè¿‡ `npm root -g` å¯ä»¥æŸ¥çœ‹å…¨å±€å®‰è£…åŒ…çš„ä½ç½®
> - `ä¸æ˜¯æ‰€æœ‰çš„åŒ…éƒ½é€‚åˆå…¨å±€å®‰è£…` ï¼Œ åªæœ‰å…¨å±€ç±»çš„å·¥å…·æ‰é€‚åˆï¼Œå¯ä»¥é€šè¿‡ `æŸ¥çœ‹åŒ…çš„å®˜æ–¹æ–‡æ¡£æ¥ç¡®å®šå®‰è£…æ–¹å¼` ï¼Œè¿™é‡Œå…ˆä¸å¿…å¤ªçº ç»“

##### 2.5.1 ä¿®æ”¹ windows æ‰§è¡Œç­–ç•¥

windows é»˜è®¤ä¸å…è®¸ npm å…¨å±€å‘½ä»¤æ‰§è¡Œè„šæœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹æ‰§è¡Œç­–ç•¥

1. ä»¥ `ç®¡ç†å‘˜èº«ä»½` æ‰“å¼€ powershell å‘½ä»¤è¡Œ
2. é”®å…¥å‘½ä»¤ `set-ExecutionPolicy remoteSigned`
3. é”®å…¥ `A` ç„¶åæ•²å›è½¦ ğŸ‘Œ
4. å¦‚æœä¸ç”Ÿæ•ˆï¼Œå¯ä»¥å°è¯•é‡å¯ vscode

##### 2.5.2 ç¯å¢ƒå˜é‡ Path

Path æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå¯ä»¥è®¾ç½®ä¸€äº›æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œåœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹æ‰¾ä¸åˆ°å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå°±ä¼šåœ¨ç¯å¢ƒå˜é‡ Path çš„ç›®å½•ä¸­æŒ¨ä¸ªçš„æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°åˆ™æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å°±ä¼šæŠ¥é”™

> è¡¥å……è¯´æ˜ï¼š
>
> - å¦‚æœå¸Œæœ›æŸä¸ªç¨‹åºåœ¨ä»»ä½•å·¥ä½œç›®å½•ä¸‹éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œå°±åº”è¯¥å°†è¯¥ç¨‹åºçš„æ‰€åœ¨ç›®å½•é…ç½®åˆ°ç¯å¢ƒå˜é‡ Path ä¸­
> - windows ä¸‹æŸ¥æ‰¾å‘½ä»¤çš„æ‰€åœ¨ä½ç½®
>   - cmd å‘½ä»¤è¡Œ ä¸­æ‰§è¡Œ where nodemon
>   - powershell å‘½ä»¤è¡Œ æ‰§è¡Œ get-command nodemon

#### 2.6 å®‰è£…åŒ…ä¾èµ–

åœ¨é¡¹ç›®åä½œä¸­æœ‰ä¸€ä¸ªå¸¸ç”¨çš„å‘½ä»¤å°±æ˜¯ `npm i` ï¼Œé€šè¿‡è¯¥å‘½ä»¤å¯ä»¥ä¾æ® `package.json` å’Œ `package-lock.json` çš„ä¾èµ–å£°æ˜å®‰è£…é¡¹ç›®ä¾èµ–

```bash
npm i
npm install
```

> node_modules æ–‡ä»¶å¤¹å¤§å¤šæ•°æƒ…å†µéƒ½ä¸ä¼šå­˜å…¥ç‰ˆæœ¬åº“

#### 2.7 å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…

é¡¹ç›®ä¸­å¯èƒ½ä¼šé‡åˆ°ç‰ˆæœ¬ä¸åŒ¹é…çš„æƒ…å†µï¼Œæœ‰æ—¶å°±éœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤çš„

```bash
 æ ¼å¼
npm i <åŒ…å@ç‰ˆæœ¬å·>
## ç¤ºä¾‹
npm i jquery@1.11.2
```

#### 2.8 åˆ é™¤ä¾èµ–

é¡¹ç›®ä¸­å¯èƒ½éœ€è¦åˆ é™¤æŸäº›ä¸éœ€è¦çš„åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤

```bash
 å±€éƒ¨åˆ é™¤
npm remove uniq
npm r uniq
## å…¨å±€åˆ é™¤
npm remove -g nodemon
```

#### 2.9 é…ç½®å‘½ä»¤åˆ«å

é€šè¿‡é…ç½®å‘½ä»¤åˆ«åå¯ä»¥æ›´ç®€å•çš„æ‰§è¡Œå‘½ä»¤
é…ç½® `package.json` ä¸­çš„ `scripts` å±æ€§

```json
{
    .
    .
    .
    "scripts": {
        "server": "node server.js",
        "start": "node index.js",
    },
    .
    .
}
```

é…ç½®å®Œæˆä¹‹åï¼Œå¯ä»¥ä½¿ç”¨åˆ«åæ‰§è¡Œå‘½ä»¤

```bash
npm run server
npm run start
```

ä¸è¿‡ `start` åˆ«åæ¯”è¾ƒç‰¹åˆ«ï¼Œä½¿ç”¨æ—¶å¯ä»¥çœç•¥ `run`

```bash
npm start
```

> è¡¥å……è¯´æ˜ï¼š
>
> - `npm start` æ˜¯é¡¹ç›®ä¸­å¸¸ç”¨çš„ä¸€ä¸ªå‘½ä»¤ï¼Œä¸€èˆ¬ç”¨æ¥å¯åŠ¨é¡¹ç›®
> - `npm run` æœ‰è‡ªåŠ¨å‘ä¸Šçº§ç›®å½•æŸ¥æ‰¾çš„ç‰¹æ€§ï¼Œè·Ÿ `require` å‡½æ•°ä¹Ÿä¸€æ ·
> - å¯¹äºé™Œç”Ÿçš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹ `scripts` å±æ€§æ¥å‚è€ƒé¡¹ç›®çš„ä¸€äº›æ“ä½œ


### 3.cnpm

#### 3.1 ä»‹ç»

cnpm æ˜¯ä¸€ä¸ªæ·˜å®æ„å»ºçš„ `npmjs.com` çš„å®Œæ•´é•œåƒï¼Œä¹Ÿç§°ä¸ºã€æ·˜å®é•œåƒã€ï¼Œ[ç½‘å€](https://npmmirror.com/)
cnpm æœåŠ¡éƒ¨ç½²åœ¨å›½å†… `é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Š` ï¼Œ å¯ä»¥æé«˜åŒ…çš„ä¸‹è½½é€Ÿåº¦
å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªå…¨å±€å·¥å…·åŒ… `cnpm` ï¼Œæ“ä½œå‘½ä»¤ä¸ `npm` å¤§ä½“ç›¸åŒ

#### 3.2 å®‰è£…

æˆ‘ä»¬å¯ä»¥é€šè¿‡ npm æ¥å®‰è£… cnpm å·¥å…·

```bash
npm install -g cnpm --registry=https://registry.npmmirror.com
```

#### 3.3 æ“ä½œå‘½ä»¤

| åŠŸèƒ½         | å‘½ä»¤                                                         |
| ------------ | ------------------------------------------------------------ |
| åˆå§‹åŒ–       | cnpm init / cnpm init                                        |
| å®‰è£…åŒ…       | cnpm i uniq <br> cnpm i -S uniq <br> cnpm i -D uniq <br> cnpm i -g nodemon |
| å®‰è£…é¡¹ç›®ä¾èµ– | cnpm i                                                       |
| åˆ é™¤         | cnpm r uniq                                                  |

#### 3.4 npm é…ç½®æ·˜å®é•œåƒ

ç”¨ npm ä¹Ÿå¯ä»¥ä½¿ç”¨æ·˜å®é•œåƒï¼Œé…ç½®çš„æ–¹å¼æœ‰ä¸¤ç§

- ç›´æ¥é…ç½®
- å·¥å…·é…ç½®

##### 3.4.1 ç›´æ¥é…ç½®

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯å®Œæˆé…ç½®

```bash
npm config set registry https://registry.npmmirror.com
```

##### 3.4.2 å·¥å…·é…ç½®

ä½¿ç”¨ `nrm` é…ç½® npm çš„é•œåƒåœ°å€ `npm registry manager`

1. å®‰è£… nrm

   ```bash
   npm i -g nrm
   ```

2. ä¿®æ”¹é•œåƒ

   ```bash
   nrm use taobao
   ```

3. æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸï¼ˆé€‰åšï¼‰

   ```bash
   nrm config list
   ```

   æ£€æŸ¥ registry åœ°å€æ˜¯å¦ä¸º https://registry.npmmirror.com/ , å¦‚æœ æ˜¯ åˆ™è¡¨æ˜æˆåŠŸ

> è¡¥å……è¯´æ˜ï¼š
>
> 1. `å»ºè®®ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼` è¿›è¡Œé•œåƒé…ç½®ï¼Œå› ä¸ºåç»­ä¿®æ”¹èµ·æ¥ä¼šæ¯”è¾ƒæ–¹ä¾¿
> 2. è™½ç„¶ cnpm å¯ä»¥æé«˜é€Ÿåº¦ï¼Œä½†æ˜¯ npm ä¹Ÿå¯ä»¥é€šè¿‡æ·˜å®é•œåƒè¿›è¡ŒåŠ é€Ÿï¼Œæ‰€ä»¥ `npm çš„ä½¿ç”¨ç‡è¿˜æ˜¯é«˜äº cnpm`


### 4.yarn

#### 4.1 yarn ä»‹ç»

yarn æ˜¯ç”± Facebook åœ¨ 2016 å¹´æ¨å‡ºçš„æ–°çš„ Javascript åŒ…ç®¡ç†å·¥å…·ï¼Œå®˜æ–¹ç½‘å€ï¼šhttps://yarnpkg.com/

#### 4.2 yarn ç‰¹ç‚¹

yarn å®˜æ–¹å®£ç§°çš„ä¸€äº›ç‰¹ç‚¹

- é€Ÿåº¦è¶…å¿«ï¼šyarn ç¼“å­˜äº†æ¯ä¸ªä¸‹è½½è¿‡çš„åŒ…ï¼Œæ‰€ä»¥å†æ¬¡ä½¿ç”¨æ—¶æ— éœ€é‡å¤ä¸‹è½½ã€‚ åŒæ—¶åˆ©ç”¨å¹¶è¡Œä¸‹è½½ä»¥æœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡ï¼Œå› æ­¤å®‰è£…é€Ÿåº¦æ›´å¿«
- è¶…çº§å®‰å…¨ï¼šåœ¨æ‰§è¡Œä»£ç ä¹‹å‰ï¼Œyarn ä¼šé€šè¿‡ç®—æ³•æ ¡éªŒæ¯ä¸ªå®‰è£…åŒ…çš„å®Œæ•´æ€§
- è¶…çº§å¯é ï¼šä½¿ç”¨è¯¦ç»†ã€ç®€æ´çš„é”æ–‡ä»¶æ ¼å¼å’Œæ˜ç¡®çš„å®‰è£…ç®—æ³•ï¼Œyarn èƒ½å¤Ÿä¿è¯åœ¨ä¸åŒç³»ç»Ÿä¸Šæ— å·®å¼‚çš„å·¥ä½œ

#### 4.3 yarn å®‰è£…

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ npm å®‰è£… yarn

```bash
npm i -g yarn
```

#### 4.4 yarn å¸¸ç”¨å‘½ä»¤

| åŠŸèƒ½         | å‘½ä»¤                                                         |
| ------------ | ------------------------------------------------------------ |
| åˆå§‹åŒ–       | yarn init / yarn init -y                                     |
| å®‰è£…åŒ…       | yarn add uniq ç”Ÿäº§ä¾èµ– <br> yarn add uniq --dev å¼€å‘ä¾èµ– <br> yarn global add nodemon å…¨å±€å®‰è£… |
| åˆ é™¤åŒ…       | yarn remove uniq åˆ é™¤é¡¹ç›®ä¾èµ–åŒ… <br> yarn global remove nodemon å…¨å±€åˆ é™¤åŒ… |
| å®‰è£…é¡¹ç›®ä¾èµ– | yarn                                                         |
| è¿è¡Œå‘½ä»¤åˆ«å | yarn <åˆ«å> # ä¸éœ€è¦æ·»åŠ  run                                 |

> æ€è€ƒé¢˜ï¼š  
> è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜å°±æ˜¯ `å…¨å±€å®‰è£…çš„åŒ…ä¸å¯ç”¨` ï¼Œyarn å…¨å±€å®‰è£…åŒ…çš„ä½ç½®å¯ä»¥é€šè¿‡ `yarn global bin` æ¥æŸ¥çœ‹ï¼Œ  
> é‚£ä½ æœ‰æ²¡æœ‰åŠæ³•ä½¿ yarn å…¨å±€å®‰è£…çš„åŒ…èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Ÿ  

#### 4.5 yarn é…ç½®æ·˜å®é•œåƒ

å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤é…ç½®æ·˜å®é•œåƒ

```bash
yarn config set registry https://registry.npmmirror.com/
```

å¯ä»¥é€šè¿‡ `yarn config list` æŸ¥çœ‹ yarn çš„é…ç½®é¡¹

#### 4.6 npm å’Œ yarn é€‰æ‹©

å¤§å®¶å¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯è¿›è¡Œé€‰æ‹©

1. ä¸ªäººé¡¹ç›®
   - å¦‚æœæ˜¯ä¸ªäººé¡¹ç›®ï¼Œ `å“ªä¸ªå·¥å…·éƒ½å¯ä»¥` ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥é€‰æ‹©
2. å…¬å¸é¡¹ç›®ï¼ˆå¦‚æœæ˜¯å…¬å¸è¦æ ¹æ®é¡¹ç›®ä»£ç æ¥é€‰æ‹©ï¼Œå¯ä»¥ `é€šè¿‡é”æ–‡ä»¶åˆ¤æ–­` é¡¹ç›®çš„åŒ…ç®¡ç†å·¥å…·
   - npm çš„é”æ–‡ä»¶ä¸º `package-lock.json`
   - yarn çš„é”æ–‡ä»¶ä¸º `yarn.lock`

> åŒ…ç®¡ç†å·¥å…· `ä¸è¦æ··ç€ç”¨ï¼Œåˆ‡è®°ï¼Œåˆ‡è®°ï¼Œåˆ‡è®°`


### 5.ç®¡ç†å‘å¸ƒåŒ…

#### 5.1 åˆ›å»ºä¸å‘å¸ƒ

æˆ‘ä»¬å¯ä»¥å°†è‡ªå·±å¼€å‘çš„å·¥å…·åŒ…å‘å¸ƒåˆ° npm æœåŠ¡ä¸Šï¼Œæ–¹ä¾¿è‡ªå·±å’Œå…¶ä»–å¼€å‘è€…ä½¿ç”¨ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š

1. åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºæ–‡ä»¶ index.jsï¼Œ åœ¨æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°ï¼Œä½¿ç”¨ module.exports æš´éœ²
2. npm åˆå§‹åŒ–å·¥å…·åŒ…ï¼Œpackage.json å¡«å†™åŒ…çš„ä¿¡æ¯ (åŒ…çš„åå­—æ˜¯å”¯ä¸€çš„)
3. æ³¨å†Œè´¦å· https://www.npmjs.com/signup
4. æ¿€æ´»è´¦å· ï¼ˆ `ä¸€å®šè¦æ¿€æ´»è´¦å·` ï¼‰
5. ä¿®æ”¹ä¸ºå®˜æ–¹çš„å®˜æ–¹é•œåƒ (å‘½ä»¤è¡Œä¸­è¿è¡Œ `nrm use npm` )
6. å‘½ä»¤è¡Œä¸‹ `npm login` å¡«å†™ç›¸å…³ç”¨æˆ·ä¿¡æ¯
7. å‘½ä»¤è¡Œä¸‹ `npm publish` æäº¤åŒ… ğŸ‘Œ

#### 5.2 æ›´æ–°åŒ…

åç»­å¯ä»¥å¯¹è‡ªå·±å‘å¸ƒçš„åŒ…è¿›è¡Œæ›´æ–°ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹

1. æ›´æ–°åŒ…ä¸­çš„ä»£ç 

2. æµ‹è¯•ä»£ç æ˜¯å¦å¯ç”¨

3. ä¿®æ”¹ `package.json` ä¸­çš„ç‰ˆæœ¬å·

4. å‘å¸ƒæ›´æ–°

   ```bash
   npm publish
   ```

#### 5.3 åˆ é™¤åŒ…

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ é™¤åŒ…

```bash
npm unpublish --force
```

åˆ é™¤åŒ…éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ï¼Œhttps://docs.npmjs.com/policies/unpublish

- ä½ æ˜¯åŒ…çš„ä½œè€…
- å‘å¸ƒå°äº 24 å°æ—¶
- å¤§äº 24 å°æ—¶åï¼Œæ²¡æœ‰å…¶ä»–åŒ…ä¾èµ–ï¼Œå¹¶ä¸”æ¯å‘¨å°äº 300 ä¸‹è½½é‡ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªç»´æŠ¤è€…


### 6.æ‰©å±•å†…å®¹

åœ¨å¾ˆå¤šè¯­è¨€ä¸­éƒ½æœ‰åŒ…ç®¡ç†å·¥å…·ï¼Œæ¯”å¦‚ï¼š

| è¯­è¨€       | åŒ…ç®¡ç†å·¥å…·          |
| ---------- | ------------------- |
| PHP        | composer            |
| Python     | pip                 |
| Java       | maven               |
| Go         | go mod              |
| JavaScript | npm/yarn/cnpm/other |
| Ruby       | rubyGems            |

é™¤äº†ç¼–ç¨‹è¯­è¨€é¢†åŸŸæœ‰åŒ…ç®¡ç†å·¥å…·ä¹‹å¤–ï¼Œæ“ä½œç³»ç»Ÿå±‚é¢ä¹Ÿå­˜åœ¨åŒ…ç®¡ç†å·¥å…·ï¼Œä¸è¿‡è¿™ä¸ªåŒ…æŒ‡çš„æ˜¯ã€ `è½¯ä»¶åŒ…` ã€

| æ“ä½œç³»ç»Ÿ | åŒ…ç®¡ç†å·¥å…· | ç½‘å€                                |
| -------- | ---------- | ----------------------------------- |
| Centos   | yum        | https://packages.debian.org/stable/ |
| Ubuntu   | apt        | https://packages.ubuntu.com/        |
| MacOS    | homebrew   | https://brew.sh/                    |
| Windows  | chocolatey | https://chocolatey.org/             |

## å…«ã€nvm

### 1.ä»‹ç»

nvm å…¨ç§° `Node Version Manager` é¡¾åæ€ä¹‰å®ƒæ˜¯ç”¨æ¥ç®¡ç† node ç‰ˆæœ¬çš„å·¥å…·ï¼Œæ–¹ä¾¿åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„ Node.js


### 2.ä½¿ç”¨

nvm çš„ä½¿ç”¨éå¸¸çš„ç®€å•ï¼Œè·Ÿ npm çš„ä½¿ç”¨æ–¹æ³•ç±»ä¼¼

#### 2.1 ä¸‹è½½å®‰è£…

é¦–å…ˆå…ˆä¸‹è½½ nvmï¼Œä¸‹è½½åœ°å€ https://github.com/coreybutler/nvm-windows/releasesï¼Œ
é€‰æ‹© `nvm-setup.exe` ä¸‹è½½å³å¯ï¼ˆç½‘ç»œå¼‚å¸¸çš„å°æœ‹å‹å¯ä»¥åœ¨èµ„æ–™æ–‡ä»¶å¤¹ä¸­è·å–ï¼‰

#### 2.2 å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤                  | è¯´æ˜                            |
| --------------------- | ------------------------------- |
| nvm list available    | æ˜¾ç¤ºæ‰€æœ‰å¯ä»¥ä¸‹è½½çš„ Node.js ç‰ˆæœ¬ |
| nvm list              | æ˜¾ç¤ºå·²å®‰è£…çš„ç‰ˆæœ¬                |
| nvm install 18.12.1   | å®‰è£… 18.12.1 ç‰ˆæœ¬çš„ Node.js     |
| nvm install latest    | å®‰è£…æœ€æ–°ç‰ˆçš„ Node.js            |
| nvm uninstall 18.12.1 | åˆ é™¤æŸä¸ªç‰ˆæœ¬çš„ Node.js          |
| nvm use 18.12.1       | åˆ‡æ¢ 18.12.1 çš„ Node.js         |

## ä¹ã€expressæ¡†æ¶

### 1.express ä»‹ç»

express æ˜¯ä¸€ä¸ªåŸºäº Node.js å¹³å°çš„æç®€ã€çµæ´»çš„ WEB åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®˜æ–¹ç½‘å€ï¼šhttps://www.expressjs.com.cn/
ç®€å•æ¥è¯´ï¼Œexpress æ˜¯ä¸€ä¸ªå°è£…å¥½çš„å·¥å…·åŒ…ï¼Œå°è£…äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä¾¿äºæˆ‘ä»¬å¼€å‘ WEB åº”ç”¨ï¼ˆHTTP æœåŠ¡ï¼‰


### 2.express ä½¿ç”¨

#### 2.1  express ä¸‹è½½

express æœ¬èº«æ˜¯ä¸€ä¸ª npm åŒ…ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ npm å®‰è£…

```bash
npm init
npm i express
```

#### 2.2 express åˆä½“éªŒ

1. åˆ›å»º JS æ–‡ä»¶ï¼Œé”®å…¥å¦‚ä¸‹ä»£ç 

   ```js
   //1. å¯¼å…¥ express
   const express = require('express');
   //2. åˆ›å»ºåº”ç”¨å¯¹è±¡
   const app = express();
   //3. åˆ›å»ºè·¯ç”±è§„åˆ™
   app.get('/home', (req, res) => {
       res.end('hello express server');
   });
   //4. ç›‘å¬ç«¯å£ å¯åŠ¨æœåŠ¡
   app.listen(3000, () => {
       console.log('æœåŠ¡å·²ç»å¯åŠ¨, ç«¯å£ç›‘å¬ä¸º 3000...');
   });
   ```

2. å‘½ä»¤è¡Œä¸‹æ‰§è¡Œè¯¥è„šæœ¬

   ```bash
    node <æ–‡ä»¶å>
    # æˆ–è€…
    nodemon <æ–‡ä»¶å>
   ```

3. ç„¶ååœ¨æµè§ˆå™¨å°±å¯ä»¥è®¿é—® http://127.0.0.1:3000/home ğŸ‘Œ

### 3.express è·¯ç”±

#### 3.1  ä»€ä¹ˆæ˜¯è·¯ç”±

å®˜æ–¹å®šä¹‰ï¼š `è·¯ç”±ç¡®å®šäº†åº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å®¢æˆ·ç«¯å¯¹ç‰¹å®šç«¯ç‚¹çš„è¯·æ±‚`

#### 3.2 è·¯ç”±çš„ä½¿ç”¨

ä¸€ä¸ªè·¯ç”±çš„ç»„æˆæœ‰ `è¯·æ±‚æ–¹æ³•` ï¼Œ `è·¯å¾„` å’Œ `å›è°ƒå‡½æ•°` ç»„æˆ

express ä¸­æä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨è·¯ç”±ï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š

```js
app.<method>(pathï¼Œcallback)
```

ä»£ç ç¤ºä¾‹ï¼š

```js
//å¯¼å…¥ express
const express = require('express');
//åˆ›å»ºåº”ç”¨å¯¹è±¡
const app = express();
//åˆ›å»º get è·¯ç”±
app.get('/home', (req, res) => {
    res.send('ç½‘ç«™é¦–é¡µ');
});
//é¦–é¡µè·¯ç”±
app.get('/', (req, res) => {
    res.send('æˆ‘æ‰æ˜¯çœŸæ­£çš„é¦–é¡µ');
});
//åˆ›å»º post è·¯ç”±
app.post('/login', (req, res) => {
    res.send('ç™»å½•æˆåŠŸ');
});
//åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚æ–¹æ³•
app.all('/search', (req, res) => {
    res.send('1 ç§’é’Ÿä¸ºæ‚¨æ‰¾åˆ°ç›¸å…³ç»“æœçº¦ 100,000,000 ä¸ª');
});
//è‡ªå®šä¹‰ 404 è·¯ç”±
app.all("*", (req, res) => {
    res.send('<h1>404 Not Found</h1>')
});
//ç›‘å¬ç«¯å£ å¯åŠ¨æœåŠ¡
app.listen(3000, () => {
    console.log('æœåŠ¡å·²ç»å¯åŠ¨, ç«¯å£ç›‘å¬ä¸º 3000');
});
```

#### 3.3 è·å–è¯·æ±‚å‚æ•°

express æ¡†æ¶å°è£…äº†ä¸€äº› API æ¥æ–¹ä¾¿è·å–è¯·æ±‚æŠ¥æ–‡ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”å…¼å®¹åŸç”Ÿ HTTP æ¨¡å—çš„è·å–æ–¹å¼

```js
//å¯¼å…¥ express
const express = require('express');
//åˆ›å»ºåº”ç”¨å¯¹è±¡
const app = express();
//è·å–è¯·æ±‚çš„è·¯ç”±è§„åˆ™
app.get('/request', (req, res) => {
    //1. è·å–æŠ¥æ–‡çš„æ–¹å¼ä¸åŸç”Ÿ HTTP è·å–æ–¹å¼æ˜¯å…¼å®¹çš„
    console.log(req.method);
    console.log(req.url);
    console.log(req.httpVersion);
    console.log(req.headers);
    //2. express ç‹¬æœ‰çš„è·å–æŠ¥æ–‡çš„æ–¹å¼
    //è·å–æŸ¥è¯¢å­—ç¬¦ä¸²
    console.log(req.query); // ã€ç›¸å¯¹é‡è¦ã€
    // è·å–æŒ‡å®šçš„è¯·æ±‚å¤´
    console.log(req.get('host'));
    res.send('è¯·æ±‚æŠ¥æ–‡çš„è·å–');
});
//å¯åŠ¨æœåŠ¡
app.listen(3000, () => {
    console.log('å¯åŠ¨æˆåŠŸ....')
});
```

#### 3.4 è·å–è·¯ç”±å‚æ•°

è·¯ç”±å‚æ•°æŒ‡çš„æ˜¯ `URL è·¯å¾„ä¸­çš„å‚æ•°ï¼ˆæ•°æ®ï¼‰`

```js
app.get('/:id.html', (req, res) => {
    res.send('å•†å“è¯¦æƒ…, å•†å“ id ä¸º' + req.params.id);
});
```

> [è·¯ç”±å‚æ•°ç»ƒä¹ ](ä»£ç /07_express/ä»£ç /05_è·¯ç”±å‚æ•°ç»ƒä¹ .js)


### 4.express å“åº”è®¾ç½®

express æ¡†æ¶å°è£…äº†ä¸€äº› API æ¥æ–¹ä¾¿ç»™å®¢æˆ·ç«¯å“åº”æ•°æ®ï¼Œå¹¶ä¸”å…¼å®¹åŸç”Ÿ HTTP æ¨¡å—çš„è·å–æ–¹å¼

```js
//è·å–è¯·æ±‚çš„è·¯ç”±è§„åˆ™
app.get("/response", (req, res) => {
    //1. express ä¸­è®¾ç½®å“åº”çš„æ–¹å¼å…¼å®¹ HTTP æ¨¡å—çš„æ–¹å¼
    res.statusCode = 404;
    res.statusMessage = 'xxx';
    res.setHeader('abc', 'xyz');
    res.write('å“åº”ä½“');
    res.end('xxx');
    //2. express çš„å“åº”æ–¹æ³•
    res.status(500); //è®¾ç½®å“åº”çŠ¶æ€ç 
    res.set('xxx', 'yyy');//è®¾ç½®å“åº”å¤´
    res.send('ä¸­æ–‡å“åº”ä¸ä¹±ç ');//è®¾ç½®å“åº”ä½“
    //è¿è´¯æ“ä½œ
    res.status(404).set('xxx', 'yyy').send('ä½ å¥½æœ‹å‹')
    //3. å…¶ä»–å“åº”
    res.redirect('http://atguigu.com')//é‡å®šå‘
    res.download('./package.json');//ä¸‹è½½å“åº”
    res.json();//å“åº” JSON
    res.sendFile(__dirname + '/home.html') //å“åº”æ–‡ä»¶å†…å®¹
});
```

### 5.express ä¸­é—´ä»¶

#### 5.1 ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶

`ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰æœ¬è´¨æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°`
`ä¸­é—´ä»¶å‡½æ•°` å¯ä»¥åƒè·¯ç”±å›è°ƒä¸€æ ·è®¿é—® `è¯·æ±‚å¯¹è±¡ï¼ˆrequestï¼‰` ï¼Œ `å“åº”å¯¹è±¡ï¼ˆresponseï¼‰`

#### 5.2 ä¸­é—´ä»¶çš„ä½œç”¨

`ä¸­é—´ä»¶çš„ä½œç”¨` å°±æ˜¯ `ä½¿ç”¨å‡½æ•°å°è£…å…¬å…±æ“ä½œï¼Œç®€åŒ–ä»£ç `

#### 5.3 ä¸­é—´ä»¶çš„ç±»å‹

- å…¨å±€ä¸­é—´ä»¶
- è·¯ç”±ä¸­é—´ä»¶

#### [5.3.1 å®šä¹‰å…¨å±€ä¸­é—´ä»¶](ä»£ç /07_express/ä»£ç /08_å…¨å±€ä¸­é—´ä»¶.js)

`æ¯ä¸€ä¸ªè¯·æ±‚` åˆ°è¾¾æœåŠ¡ç«¯ä¹‹å `éƒ½ä¼šæ‰§è¡Œå…¨å±€ä¸­é—´ä»¶å‡½æ•°`
å£°æ˜ä¸­é—´ä»¶å‡½æ•°

```js
let recordMiddleware = function (request, response, next) {
    //å®ç°åŠŸèƒ½ä»£ç 
    //......
    //æ‰§è¡Œnextå‡½æ•°(å½“å¦‚æœå¸Œæœ›æ‰§è¡Œå®Œä¸­é—´ä»¶å‡½æ•°ä¹‹åï¼Œä»ç„¶ç»§ç»­æ‰§è¡Œè·¯ç”±ä¸­çš„å›è°ƒå‡½æ•°ï¼Œå¿…é¡»è°ƒç”¨next)
    next();
}
```

åº”ç”¨ä¸­é—´ä»¶

```js
app.use(recordMiddleware);
```

å£°æ˜æ—¶å¯ä»¥ç›´æ¥å°†åŒ¿åå‡½æ•°ä¼ é€’ç»™ `use`

```js
app.use(function (request, response, next) {
    //å®ç°åŠŸèƒ½ä»£ç 
    //.....
    //æ‰§è¡Œnextå‡½æ•°(å½“å¦‚æœå¸Œæœ›æ‰§è¡Œå®Œä¸­é—´ä»¶å‡½æ•°ä¹‹åï¼Œä»ç„¶ç»§ç»­æ‰§è¡Œè·¯ç”±ä¸­çš„å›è°ƒå‡½æ•°ï¼Œå¿…é¡»è°ƒç”¨next)
    next();
});
```

#### 5.3.2 å¤šä¸ªå…¨å±€ä¸­é—´ä»¶

express å…è®¸ä½¿ç”¨ app.use() å®šä¹‰å¤šä¸ªå…¨å±€ä¸­é—´ä»¶

```js
app.use(function (request, response, next) {
    console.log('å®šä¹‰ç¬¬ä¸€ä¸ªä¸­é—´ä»¶');
    next();
});
app.use(function (request, response, next) {
    console.log('å®šä¹‰ç¬¬äºŒä¸ªä¸­é—´ä»¶');
    next();
});
```

#### [5.3.3 å®šä¹‰è·¯ç”±ä¸­é—´ä»¶](ä»£ç /07_express/ä»£ç /09_è·¯ç”±ä¸­é—´ä»¶.js)

å¦‚æœ `åªéœ€è¦å¯¹æŸä¸€äº›è·¯ç”±è¿›è¡ŒåŠŸèƒ½å°è£…` ï¼Œåˆ™å°±éœ€è¦è·¯ç”±ä¸­é—´ä»¶
è°ƒç”¨æ ¼å¼å¦‚ä¸‹ï¼š

```js
app.get('/è·¯å¾„', `ä¸­é—´ä»¶å‡½æ•°`, (request, response) => {
});
app.get('/è·¯å¾„', `ä¸­é—´ä»¶å‡½æ•°1`, `ä¸­é—´ä»¶å‡½æ•°2`, (request, response) => {
});
```

#### 5.4 é™æ€èµ„æºä¸­é—´ä»¶

express å†…ç½®å¤„ç†é™æ€èµ„æºçš„ä¸­é—´ä»¶

```js
//å¼•å…¥expressæ¡†æ¶
const express = require('express');
//åˆ›å»ºæœåŠ¡å¯¹è±¡
const app = express();
//é™æ€èµ„æºä¸­é—´ä»¶çš„è®¾ç½®ï¼Œå°†å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„publicç›®å½•ä½œä¸ºç½‘ç«™çš„æ ¹ç›®å½•
app.use(express.static('./public')); //å½“ç„¶è¿™ä¸ªç›®å½•ä¸­éƒ½æ˜¯ä¸€äº›é™æ€èµ„æº
//å¦‚æœè®¿é—®çš„å†…å®¹ç»å¸¸å˜åŒ–ï¼Œè¿˜æ˜¯éœ€è¦è®¾ç½®è·¯ç”±
//ä½†æ˜¯ï¼Œåœ¨è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœpublicç›®å½•ä¸‹æœ‰index.htmlæ–‡ä»¶ï¼Œå•ç‹¬ä¹Ÿæœ‰index.htmlçš„è·¯ç”±ï¼Œ
//åˆ™è°ä¹¦å†™åœ¨å‰ï¼Œä¼˜å…ˆæ‰§è¡Œè°
app.get('/index.html', (request, response) => {
    respsonse.send('é¦–é¡µ');
});
//ç›‘å¬ç«¯å£
app.listen(3000, () => {
    console.log('3000 ç«¯å£å¯åŠ¨....');
});
```

> æ³¨æ„äº‹é¡¹:
>
> 1. index.html æ–‡ä»¶ä¸ºé»˜è®¤æ‰“å¼€çš„èµ„æº
> 2. å¦‚æœé™æ€èµ„æºä¸è·¯ç”±è§„åˆ™åŒæ—¶åŒ¹é…ï¼Œè°å…ˆåŒ¹é…è°å°±å“åº”
> 3. è·¯ç”±å“åº”åŠ¨æ€èµ„æºï¼Œé™æ€èµ„æºä¸­é—´ä»¶å“åº”é™æ€èµ„æº

#### 5.5 è·å–è¯·æ±‚ä½“æ•°æ® body-parser

express å¯ä»¥ä½¿ç”¨ body-parser åŒ…å¤„ç†è¯·æ±‚ä½“
ç¬¬ä¸€æ­¥ï¼šå®‰è£…

```bash
npm i body-parser
```

ç¬¬äºŒæ­¥ï¼šå¯¼å…¥ body-parser åŒ…

```js
const bodyParser = require('body-parser');
```

ç¬¬ä¸‰æ­¥ï¼šè·å–ä¸­é—´ä»¶å‡½æ•°

```js
//å¤„ç† querystring æ ¼å¼çš„è¯·æ±‚ä½“
let urlParser = bodyParser.urlencoded({ extended: false });
//å¤„ç† JSON æ ¼å¼çš„è¯·æ±‚ä½“
let jsonParser = bodyParser.json();
```

ç¬¬å››æ­¥ï¼šè®¾ç½®è·¯ç”±ä¸­é—´ä»¶ï¼Œç„¶åä½¿ç”¨ request.body æ¥è·å–è¯·æ±‚ä½“æ•°æ®

```js
app.post('/login', urlParser, (request, response) => {
    //è·å–è¯·æ±‚ä½“æ•°æ®
    //console.log(request.body);
    //ç”¨æˆ·å
    console.log(request.body.username);
    //å¯†ç 
    console.log(request.body.userpass);
    response.send('è·å–è¯·æ±‚ä½“æ•°æ®');
});
```

è·å–åˆ°çš„è¯·æ±‚ä½“æ•°æ®ï¼š

```
[Object: null prototype] { username: 'admin', userpass: '123456' }
```


### 6.Router

#### 6.1 ä»€ä¹ˆæ˜¯ Router

express ä¸­çš„ Router æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸­é—´ä»¶å’Œè·¯ç”±ç³»ç»Ÿï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå°å‹çš„ app å¯¹è±¡ã€‚

#### 6.2 Router ä½œç”¨

å¯¹è·¯ç”±è¿›è¡Œæ¨¡å—åŒ–ï¼Œæ›´å¥½çš„ç®¡ç†è·¯ç”±

#### 6.3 Router ä½¿ç”¨

åˆ›å»ºç‹¬ç«‹çš„ JS æ–‡ä»¶

```js
//1. å¯¼å…¥ express
const express = require('express');
//2. åˆ›å»ºè·¯ç”±å™¨å¯¹è±¡
const router = express.Router();
//3. åœ¨ router å¯¹è±¡èº«ä¸Šæ·»åŠ è·¯ç”±
router.get('/', (req, res) => {
    res.send('é¦–é¡µ');
})
router.get('/cart', (req, res) => {
    res.send('è´­ç‰©è½¦');
});
//4. æš´éœ²
module.exports = router;
```

ä¸»æ–‡ä»¶

```js
const express = require('express');
const app = express();
//5.å¼•å…¥å­è·¯ç”±æ–‡ä»¶
const homeRouter = require('./routes/homeRouter');
//6.è®¾ç½®å’Œä½¿ç”¨ä¸­é—´ä»¶
app.use(homeRouter);
app.listen(3000, () => {
    console.log('3000 ç«¯å£å¯åŠ¨....');
});
```


### 7.EJS æ¨¡æ¿å¼•æ“

#### 7.1 ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“

æ¨¡æ¿å¼•æ“æ˜¯åˆ†ç¦» `ç”¨æˆ·ç•Œé¢å’Œä¸šåŠ¡æ•°æ®` çš„ä¸€ç§æŠ€æœ¯

#### 7.2 ä»€ä¹ˆæ˜¯ EJS

EJS æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ Javascript çš„æ¨¡æ¿å¼•æ“

- å®˜ç½‘: https://ejs.co/
- ä¸­æ–‡ç«™ï¼šhttps://ejs.bootcss.com/

#### 7.3  EJS åˆä½“éªŒ

ä¸‹è½½å®‰è£…EJS

```bash
npm i ejs --save
```

ä»£ç ç¤ºä¾‹

```js
//1.å¼•å…¥ejs
const ejs = require('ejs');
//2.å®šä¹‰æ•°æ®
let person = ['å¼ ä¸‰', 'æå››', 'ç‹äºŒéº»å­'];
//3.ejsè§£ææ¨¡æ¿è¿”å›ç»“æ„
//<%= %> æ˜¯ejsè§£æå†…å®¹çš„æ ‡è®°ï¼Œä½œç”¨æ˜¯è¾“å‡ºå½“å‰è¡¨è¾¾å¼çš„æ‰§è¡Œç»“æ„
let html = ejs.render('<%= person.join(",") %>', { person: person });
//4.è¾“å‡ºç»“æœ
console.log(html);
```

å‘½ä»¤è¡Œä¸‹è¿è¡Œ

#### 7.4 EJS å¸¸ç”¨è¯­æ³•

æ‰§è¡ŒJSä»£ç 

```
<% code %>
```

è¾“å‡ºè½¬ä¹‰çš„æ•°æ®åˆ°æ¨¡æ¿ä¸Š

```
<%= code %>
```

è¾“å‡ºéè½¬ä¹‰çš„æ•°æ®åˆ°æ¨¡æ¿ä¸Š

```
<%- code %>
```

#### 7.5 Express ä¸­ä½¿ç”¨ EJS

```js
//å¯¼å…¥express
const express = require('express')
//å¯¼å…¥ path
const path = require('path')
//åˆ›å»ºåº”ç”¨å¯¹è±¡
const app = express()
// 1.è®¾ç½®æ¨¡æ¿å¼•æ“
app.set('view engine','ejs')  //pug  twing
// 2.è®¾ç½®æ¨¡æ¿æ–‡ä»¶å­˜æ”¾ä½ç½®  æ¨¡æ¿æ–‡ä»¶:å…·æœ‰æ¨¡æ¿è¯­æ³•å†…å®¹çš„æ–‡ä»¶
app.set('views',path.resolve(__dirname+'/views'))

//åˆ›å»ºè·¯ç”±
app.get('/home',(req,res)=>{
    //3.renderå“åº”
    //res.render('æ¨¡æ¿çš„æ–‡ä»¶å'ï¼Œ'æ•°æ®')
    //å£°æ˜å˜é‡
    let title = 'æ ‡é¢˜'
    res.render('home',{title});
    //4.åˆ›å»ºæ¨¡æ¿æ–‡ä»¶
})

//ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡
app.listen(3000,()=>{
    console.log('æœåŠ¡å·²ç»å¯åŠ¨ï¼Œç«¯å£3000æ­£åœ¨ç›‘å¬ä¸­...');
})
```

#### 7.6 express-generator

Express åº”ç”¨ç¨‹åºç”Ÿæˆå™¨ã€‚é€šè¿‡åº”ç”¨ç”Ÿæˆå™¨å·¥å…· *express*-*generator* å¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªåº”ç”¨çš„éª¨æ¶

## åã€ä¼šè¯æ§åˆ¶

### 1.ä»‹ç»

æ‰€è°“ä¼šè¯æ§åˆ¶å°±æ˜¯ `å¯¹ä¼šè¯è¿›è¡Œæ§åˆ¶`
HTTP æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œå®ƒæ²¡æœ‰åŠæ³•åŒºåˆ†å¤šæ¬¡çš„è¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œ `æ— æ³•åŒºåˆ†ç”¨æˆ·`
è€Œäº§å“ä¸­åˆå¤§é‡å­˜åœ¨çš„è¿™æ ·çš„éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ `ä¼šè¯æ§åˆ¶` æ¥è§£å†³è¯¥é—®é¢˜

å¸¸è§çš„ä¼šè¯æ§åˆ¶æŠ€æœ¯æœ‰ä¸‰ç§ï¼š

- cookie
- session
- token


### 2.cookie

#### 2.1 cookie æ˜¯ä»€ä¹ˆ

cookie æ˜¯ HTTP æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®
cookie æ˜¯ä¿å­˜åœ¨æµè§ˆå™¨ç«¯çš„ä¸€å°å—æ•°æ®
cookie æ˜¯æŒ‰ç…§åŸŸååˆ’åˆ†ä¿å­˜çš„

ç®€å•ç¤ºä¾‹ï¼š

| åŸŸå             | cookie                        |
| ---------------- | ----------------------------- |
| www.baidu.com    | a=100; b=200                  |
| www.bilibili.com | xid=1020abce121; hm=112411213 |
| jd.com           | x=100; ocw=12414cce           |

#### 2.2 cookie çš„ç‰¹ç‚¹

æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¼šè‡ªåŠ¨å°† `å½“å‰åŸŸåä¸‹` å¯ç”¨çš„ cookie è®¾ç½®åœ¨è¯·æ±‚å¤´ä¸­ï¼Œç„¶åä¼ é€’ç»™æœåŠ¡å™¨

è¿™ä¸ªè¯·æ±‚å¤´çš„åå­—ä¹Ÿå« `cookie` ï¼Œæ‰€ä»¥å°† `cookie ç†è§£ä¸ºä¸€ä¸ª HTTP çš„è¯·æ±‚å¤´ä¹Ÿæ˜¯å¯ä»¥çš„`

#### 2.3 cookie çš„è¿è¡Œæµç¨‹

å¡«å†™è´¦å·å’Œå¯†ç æ ¡éªŒèº«ä»½ï¼Œæ ¡éªŒé€šè¿‡åä¸‹å‘ cookie

æœ‰äº† cookie ä¹‹åï¼Œåç»­å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨æºå¸¦ cookie

#### 2.4 æµè§ˆå™¨æ“ä½œ cookie

æµè§ˆå™¨æ“ä½œ cookie çš„æ“ä½œï¼Œä½¿ç”¨ç›¸å¯¹è¾ƒå°‘ï¼Œå¤§å®¶äº†è§£å³å¯

1. ç¦ç”¨æ‰€æœ‰ cookie
2. åˆ é™¤ cookie
3. æŸ¥çœ‹ cookie

#### 2.5 cookie çš„ä»£ç æ“ä½œ

express ä¸­å¯ä»¥ä½¿ç”¨ `cookie-parser` è¿›è¡Œå¤„ç†

```js
const express = require('express');
//1. å®‰è£… cookie-parser npm i cookie-parser
//2. å¼•å…¥ cookieParser åŒ…
const cookieParser = require('cookie-parser');
const app = express();
//3. è®¾ç½® cookieParser ä¸­é—´ä»¶
app.use(cookieParser());
//4-1 è®¾ç½® cookie
app.get('/set-cookie', (request, response) => {
    // ä¸å¸¦æ—¶æ•ˆæ€§
    response.cookie('username', 'wangwu');
    // å¸¦æ—¶æ•ˆæ€§
    response.cookie('email', '23123456@qq.com', { maxAge: 5 * 60 * 1000 });
    //å“åº”
    response.send('Cookieçš„è®¾ç½®');
});
//4-2 è¯»å– cookie
app.get('/get-cookie', (request, response) => {
    //è¯»å– cookie
    console.log(request.cookies);
    //å“åº”ä½“
    response.send('Cookieçš„è¯»å–');
});
//4-3 åˆ é™¤cookie
app.get('/delete-cookie', (request, response) => {
    //åˆ é™¤
    response.clearCookie('username');
    //å“åº”
    response.send('cookie çš„æ¸…é™¤');
});
//4. å¯åŠ¨æœåŠ¡
app.listen(3000, () => {
    console.log('æœåŠ¡å·²ç»å¯åŠ¨....');
});
```

> ä¸åŒæµè§ˆå™¨ä¸­çš„ cookie æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¸å…±äº«


### 3.session

#### 3.1  session æ˜¯ä»€ä¹ˆ

session æ˜¯ä¿å­˜åœ¨ `æœåŠ¡å™¨ç«¯çš„ä¸€å—å„¿æ•°æ®` ï¼Œä¿å­˜å½“å‰è®¿é—®ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯

#### 3.2 session çš„ä½œç”¨

å®ç°ä¼šè¯æ§åˆ¶ï¼Œå¯ä»¥è¯†åˆ«ç”¨æˆ·çš„èº«ä»½ï¼Œå¿«é€Ÿè·å–å½“å‰ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯

#### 3.3  session è¿è¡Œæµç¨‹

å¡«å†™è´¦å·å’Œå¯†ç æ ¡éªŒèº«ä»½ï¼Œæ ¡éªŒé€šè¿‡ååˆ›å»º `session` ä¿¡æ¯ ï¼Œç„¶åå°† `session_id` çš„å€¼é€šè¿‡å“åº”å¤´è¿”å›ç»™æµè§ˆå™¨

æœ‰äº† cookieï¼Œä¸‹æ¬¡å‘é€è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨æºå¸¦ cookieï¼ŒæœåŠ¡å™¨é€šè¿‡ `cookie` ä¸­çš„ `session_id` çš„å€¼ç¡®å®šç”¨æˆ·çš„èº«ä»½

#### 3.4 session çš„ä»£ç æ“ä½œ

express ä¸­å¯ä»¥ä½¿ç”¨ `express-session` å¯¹ session è¿›è¡Œæ“ä½œ

```js
const express = require('express');
//1. å®‰è£…åŒ… npm i express-session connect-mongo
//2. å¼•å…¥ express-session connect-mongo
const session = require("express-session");
const MongoStore = require('connect-mongo');
const app = express();
//3. è®¾ç½® session çš„ä¸­é—´ä»¶
app.use(session({
    name: 'sid', //è®¾ç½®cookieçš„nameï¼Œé»˜è®¤å€¼æ˜¯ï¼šconnect.sid
    secret: 'atguigu', //å‚ä¸åŠ å¯†çš„å­—ç¬¦ä¸²ï¼ˆåˆç§°ç­¾åï¼‰
    saveUninitialized: false, //æ˜¯å¦ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½è®¾ç½®ä¸€ä¸ªcookieç”¨æ¥å­˜å‚¨sessionçš„id
    resave: true, //æ˜¯å¦åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é‡æ–°ä¿å­˜session
    store: MongoStore.create({
        mongoUrl: 'mongodb://127.0.0.1:27017/project' //æ•°æ®åº“çš„è¿æ¥é…ç½®
    }),
    cookie: {
        httpOnly: true, // å¼€å¯åå‰ç«¯æ— æ³•é€šè¿‡ JS æ“ä½œ
        maxAge: 1000 * 300 // è¿™ä¸€æ¡ æ˜¯æ§åˆ¶ sessionID çš„è¿‡æœŸæ—¶é—´çš„ï¼ï¼ï¼
    },
}))
//åˆ›å»º session
app.get('/login', (req, res) => {
    //è®¾ç½®session
    req.session.username = 'zhangsan';
    req.session.email = 'zhangsan@qq.com'
    res.send('ç™»å½•æˆåŠŸ');
})
//è·å– session
app.get('/home', (req, res) => {
    console.log('sessionçš„ä¿¡æ¯');
    console.log(req.session.username);
    if (req.session.username) {
        res.send(`ä½ å¥½ ${req.session.username}`);
    } else {
        res.send('ç™»å½• æ³¨å†Œ');
    }
})
//é”€æ¯ session
app.get('/logout', (req, res) => {
    //é”€æ¯session
    // res.send('è®¾ç½®session');
    req.session.destroy(() => {
        res.send('æˆåŠŸé€€å‡º');
    });
});
app.listen(3000, () => {
    console.log('æœåŠ¡å·²ç»å¯åŠ¨, ç«¯å£ ' + 3000 + ' ç›‘å¬ä¸­...');
});
```


### 4.session å’Œ cookie çš„åŒºåˆ«

cookie å’Œ session çš„åŒºåˆ«ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š

1. å­˜åœ¨çš„ä½ç½®
   - cookieï¼šæµè§ˆå™¨ç«¯
   - sessionï¼šæœåŠ¡ç«¯
2. å®‰å…¨æ€§
   - cookie æ˜¯ä»¥æ˜æ–‡çš„æ–¹å¼å­˜æ”¾åœ¨å®¢æˆ·ç«¯çš„ï¼Œå®‰å…¨æ€§ç›¸å¯¹è¾ƒä½
   - session å­˜æ”¾äºæœåŠ¡å™¨ä¸­ï¼Œæ‰€ä»¥å®‰å…¨æ€§ `ç›¸å¯¹` è¾ƒå¥½
3. ç½‘ç»œä¼ è¾“é‡
   - cookie è®¾ç½®å†…å®¹è¿‡å¤šä¼šå¢å¤§æŠ¥æ–‡ä½“ç§¯ï¼Œ ä¼šå½±å“ä¼ è¾“æ•ˆç‡
   - session æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œåªæ˜¯é€šè¿‡ cookie ä¼ é€’ idï¼Œæ‰€ä»¥ä¸å½±å“ä¼ è¾“æ•ˆç‡
4. å­˜å‚¨é™åˆ¶
   - æµè§ˆå™¨é™åˆ¶å•ä¸ª cookie ä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡ `4K` ï¼Œä¸”å•ä¸ªåŸŸåä¸‹çš„å­˜å‚¨æ•°é‡ä¹Ÿæœ‰é™åˆ¶
   - session æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­ï¼Œæ‰€ä»¥æ²¡æœ‰è¿™äº›é™åˆ¶


### 5.token

#### 5.1 token æ˜¯ä»€ä¹ˆ

`token` æ˜¯æœåŠ¡ç«¯ç”Ÿæˆå¹¶è¿”å›ç»™ HTTP å®¢æˆ·ç«¯çš„ä¸€ä¸²åŠ å¯†å­—ç¬¦ä¸²ï¼Œ `token` ä¸­ä¿å­˜ç€ `ç”¨æˆ·ä¿¡æ¯`

#### 5.2 token çš„ä½œç”¨

å®ç°ä¼šè¯æ§åˆ¶ï¼Œå¯ä»¥è¯†åˆ«ç”¨æˆ·çš„èº«ä»½ï¼Œä¸»è¦ç”¨äºç§»åŠ¨ç«¯ APP

#### 5.3 token çš„å·¥ä½œæµç¨‹

å¡«å†™è´¦å·å’Œå¯†ç æ ¡éªŒèº«ä»½ï¼Œæ ¡éªŒé€šè¿‡åå“åº” tokenï¼Œtoken ä¸€èˆ¬æ˜¯åœ¨å“åº”ä½“ä¸­è¿”å›ç»™å®¢æˆ·ç«¯çš„

åç»­å‘é€è¯·æ±‚æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨å°† token æ·»åŠ åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­ï¼Œä¸€èˆ¬æ˜¯æ”¾åœ¨è¯·æ±‚å¤´ä¸­

#### 5.4 token çš„ç‰¹ç‚¹

- æœåŠ¡ç«¯å‹åŠ›æ›´å°
  - æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯
- ç›¸å¯¹æ›´å®‰å…¨
  - æ•°æ®åŠ å¯†
  - å¯ä»¥é¿å… CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰
- æ‰©å±•æ€§æ›´å¼º
  - æœåŠ¡é—´å¯ä»¥å…±äº«
  - å¢åŠ æœåŠ¡èŠ‚ç‚¹æ›´ç®€å•

#### 5.5 JWT

JWTï¼ˆJSON Web Token ï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„è·¨åŸŸè®¤è¯è§£å†³æ–¹æ¡ˆï¼Œå¯ç”¨äºåŸºäº `token` çš„èº«ä»½éªŒè¯
JWT ä½¿ token çš„ç”Ÿæˆä¸æ ¡éªŒæ›´è§„èŒƒ
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `jsonwebtoken åŒ…` æ¥æ“ä½œ token

```js
//å¯¼å…¥ jsonwebtokan
const jwt = require('jsonwebtoken');
//åˆ›å»º token
// jwt.sign(æ•°æ®, åŠ å¯†å­—ç¬¦ä¸², é…ç½®å¯¹è±¡)
let token = jwt.sign({
    username: 'zhangsan'
}, 'atguigu', {
    expiresIn: 60 //å•ä½æ˜¯ ç§’
});
//è§£æ token
jwt.verify(token, 'atguigu', (err, data) => {
    if (err) {
        console.log('æ ¡éªŒå¤±è´¥~~');
        return
    }
    console.log(data);
});
```

> æ‰©å±•é˜…è¯»ï¼šhttps://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html


### 6.é™„å½•

#### 6.1 æœ¬åœ°åŸŸå

æ‰€è°“æœ¬åœ°åŸŸåå°±æ˜¯ `åªèƒ½åœ¨æœ¬æœºä½¿ç”¨çš„åŸŸå` ï¼Œä¸€èˆ¬åœ¨å¼€å‘é˜¶æ®µä½¿ç”¨

##### 6.1.1 æ“ä½œæµç¨‹

ç¼–è¾‘æ–‡ä»¶ `C:\Windows\System32\drivers\etc\hosts`

```txt
127.0.0.1 www.baidu.com
```

å¦‚æœä¿®æ”¹å¤±è´¥ï¼Œ `å¯ä»¥ä¿®æ”¹è¯¥æ–‡ä»¶çš„æƒé™`

##### 6.1.2 åŸç†

åœ¨åœ°å€æ è¾“å…¥ `åŸŸå` ä¹‹åï¼Œæµè§ˆå™¨ä¼šå…ˆè¿›è¡Œ DNSï¼ˆDomain Name Systemï¼‰ æŸ¥è¯¢ï¼Œè·å–è¯¥åŸŸåå¯¹åº”çš„ IP åœ°å€
è¯·æ±‚ä¼šå‘é€åˆ° DNS æœåŠ¡å™¨ï¼Œå¯ä»¥ `æ ¹æ®åŸŸåè¿”å› IP åœ°å€`
å¯ä»¥é€šè¿‡ `ipconfig /all` æŸ¥çœ‹æœ¬æœºçš„ DNS æœåŠ¡å™¨
`hosts` æ–‡ä»¶ä¹Ÿå¯ä»¥è®¾ç½®åŸŸåä¸ IP çš„æ˜ å°„å…³ç³»ï¼Œåœ¨å‘é€è¯·æ±‚å‰ï¼Œå¯ä»¥é€šè¿‡è¯¥æ–‡ä»¶è·å–åŸŸåçš„ IP åœ°å€

